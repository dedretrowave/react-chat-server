{"version":3,"sources":["redux/reducers/attachments.js","redux/reducers/dialogs.js","redux/reducers/messages.js","redux/reducers/user.js","assets/img/wave.svg","assets/img/waveBlack.svg","assets/img/play.svg","assets/img/pause.svg","assets/img/checked.svg","assets/img/unchecked.svg","redux/reducers sync /^/.*$","redux/store.js","utils/validate.js","components/Button/index.jsx","components/WhiteBlock/index.js","utils/helpers/validateField.js","utils/helpers/openNotification.js","components/AudioMessage/index.jsx","utils/helpers/convertCurrentTime.js","components/Message/index.jsx","components/DialogItem/index.jsx","components/IconChecked/index.jsx","components/DateInfo/index.jsx","components/Dialogs/index.jsx","components/Messages/index.jsx","components/Avatar/index.jsx","utils/helpers/generateAvatarFromHash.js","components/ChatInput/index.jsx","components/Status/index.jsx","core/axios.js","core/socket.js","utils/api/dialogs.js","utils/api/messages.js","utils/api/user.js","utils/api/upload.js","components/VerifyEmail/index.jsx","redux/actions/dialogs.js","redux/actions/messages.js","redux/actions/user.js","redux/actions/attachments.js","containers/Dialogs.js","containers/Messages.js","containers/ChatInput.js","containers/Status.js","containers/Sidebar.js","components/Sidebar/index.jsx","components/FilesUploader/index.jsx","modules/LoginForm/components/LoginForm.jsx","modules/LoginForm/index.js","modules/LoginForm/containers/LoginForm.js","modules/RegisterForm/components/RegisterForm.jsx","modules/RegisterForm/index.js","modules/RegisterForm/containers/RegisterForm.js","pages/Auth/index.js","pages/Home/index.jsx","App.js","index.js","redux/reducers/index.js"],"names":["initialState","items","attachments","state","type","payload","filter","file","uid","currentDialogId","window","location","pathname","split","isLoading","dialogs","messages","message","_id","text","windowLocalStorageToken","localStorage","token","undefined","data","isAuthed","user","module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middleware","thunk","store","createStore","rootReducer","applyMiddleware","isAuth","values","errors","rules","email","test","password","repassword","fullname","forEach","key","Button","props","className","classNames","size","Block","children","touched","title","duration","notification","description","AudioMessage","audio","isMe","useState","isPlaying","setPlaying","currentTime","setCurrentTime","progress","setProgress","audioElem","useRef","useEffect","audioElement","current","addEventListener","ref","src","preload","style","width","onClick","pause","play","pauseSvg","alt","playSvg","waveBlackSvg","waveSvg","number","mins","Math","floor","secs","toFixed","convertCurrentTime","Message","createdAt","unchecked","isAudio","isTyping","onRemoveMessage","setPreviewImage","length","content","trigger","shape","icon","reactStringReplace","match","emoji","set","random","url","item","filename","date","DialogsItem","time","onSelect","lastMessage","to","join","isOnline","bind","Date","isToday","format","ext","console","log","IconChecked","unCheckedIcon","checkedIcon","DateInfo","formatDistanceToNow","addSuffix","Dialogs","myId","onSearch","inputValue","onSelectDialog","Search","placeholder","onChange","target","value","orderBy","author","partner","image","Empty","PRESENTED_IMAGE_SIMPLE","Messages","baseRef","previewImage","spin","visible","onCancel","footer","Avatar","avatar","color","hash","toString","substr","char","charCodeAt","r","g","b","tinycolor","lighten","saturate","toHexString","colorLighten","generateAvatarFromHash","firstCharOfName","background","TextArea","Input","ChatInput","toggleEmojiTab","emojiTabIsActive","setValue","handleEmojiSelect","handleSendMessage","handleFileUpload","removeAttachment","isRecording","onRecord","onStopRecording","onFiles","containerProps","uploadProps","accept","multiple","height","autosize","maxRows","onKeyUp","Status","online","axios","defaults","baseURL","origin","headers","common","sockets","socketIO","replace","dialogsApi","getAll","get","create","partnerId","post","messagesApi","getDialogById","dialogId","send","dialog","removeById","delete","userApi","login","postData","getMe","verifyHash","register","findUsers","query","uploadApi","upload","formData","FormData","append","VerifyEmail","history","verified","setVerified","statusMessage","setStatusMessage","status","setStatus","search","then","catch","toUpperCase","subTitle","extra","push","actions","setDialogs","setCurrentDialogId","fetchDialogs","dispatch","messagesActions","setMessages","addMessage","getState","setIsLoading","bool","removeMessageById","messageId","fetchMessageSend","fetchMessages","setUserData","setIsAuthed","fetchUserData","fetchUserRegister","fetchUserLogin","openNotification","setAttachments","connect","dialogsActions","Array","from","filtered","setFiltered","socket","on","toLowerCase","indexOf","fetchMessageChange","messagesRef","onDialogChange","removeListener","scrollTop","scrollHeight","attachmentsActions","navigator","getUserMedia","mozGetUserMedia","msGetUserMedia","webkitGetUserMedia","setEmojiTabIsActive","setIsRecording","mediaRecorder","setMediaRecorder","handleOutsideClick","el","contains","onRecording","stream","recorder","MediaRecorder","start","onstart","onstop","ondataavailable","audioFile","File","audioId","onError","err","files","a","uploaded","round","name","emojiTabButton","document","querySelector","colons","trim","keyCode","stop","currentDialog","isVisible","setIsVisible","setInputValue","users","setUsers","isSearching","setIsSearching","selectedUserId","setSelectedUserId","messageText","setMessageText","handleClose","onShow","onClose","onModalOk","onChangeInput","onSelectUser","userId","onTextAreaChange","Option","Select","Sidebar","options","display","alignItems","marginLeft","disabled","loading","Item","label","notFoundContent","defaultActiveFirstOption","showArrow","filterOption","showSearch","marginTop","minRows","defaultProps","getBase64","Promise","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","FilesUploader","previewVisible","fileList","setState","handlePreview","preview","originalFileObj","action","listType","onPreview","onRemove","LoginForm","handleChange","handleBlur","handleSubmit","isValid","isSubmitting","validateStatus","validateField","help","prefix","onBlur","htmlType","withFormik","mapPropsToValues","validate","validateForm","setSubmitting","userActions","displayName","RegisterForm","hasFeedback","Auth","exact","path","component","withRouter","myInfo","setMyInfo","render","ReactDOM","combineReducers","reduce","initial","require","default"],"mappings":"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","file":"static/js/main.bf84cf38.chunk.js","sourcesContent":["const initialState = {\r\n    items: []\r\n};\r\n\r\nconst attachments = (state = initialState, { type, payload }) => {\r\n    switch(type) {\r\n        case 'ATTACHMENTS:SET_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: payload\r\n            };\r\n        case 'ATTACHMENTS:REMOVE_FILE':\r\n            return {\r\n                ...state,\r\n                items: state.items.filter(file => file.uid !== payload.uid),\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default attachments;","const initialState = {\r\n    items: [],\r\n    currentDialogId: window.location.pathname.split('dialog/')[1],\r\n    isLoading: false,\r\n};\r\n\r\nconst dialogs = (state = initialState, { type, payload }) => {\r\n    switch(type) {\r\n        case 'DIALOGS:SET_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: payload\r\n            };\r\n        case 'DIALOGS:SET_IS_LOADING':\r\n            return {\r\n                ...state,\r\n                isLoading: payload\r\n            };\r\n        case 'DIALOGS:SET_CURRENT_DIALOG_ID':\r\n            return {\r\n                ...state,\r\n                currentDialogId: payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default dialogs;","const initialState = {\r\n    items: [],\r\n    isLoading: false,\r\n};\r\n\r\nconst messages = (state = initialState, { type, payload }) => {\r\n    switch(type) {\r\n        case 'MESSAGES:SET_ITEMS':\r\n            return {\r\n                ...state,\r\n                items: payload,\r\n                isLoading: false,\r\n            };\r\n        case 'MESSAGES:ADD_MESSAGE':\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items,\r\n                    payload\r\n                ]\r\n            };\r\n        case 'MESSAGES:CHANGE_MESSAGE':\r\n            return {\r\n                ...state,\r\n                items: state.items.filter(message => message._id === payload._id ? message.text = payload.text : true)\r\n            };\r\n        case 'MESSAGES:REMOVE_MESSAGE':\r\n            return {\r\n                ...state,\r\n                items: state.items.filter(message => message._id !== payload)\r\n            };\r\n        case 'MESSAGES:SET_IS_LOADING':\r\n            return {\r\n                ...state,\r\n                isLoading: payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default messages;","const windowLocalStorageToken = window.localStorage.token === 'undefined' ? undefined : window.localStorage.token;\r\n\r\nconst initialState = {\r\n    data: null,\r\n    token: windowLocalStorageToken,\r\n    isAuthed: !!windowLocalStorageToken,\r\n};\r\n\r\nconst user = (state = initialState, {type, payload}) => {\r\n    switch(type) {\r\n        case 'USER:SET_DATA':\r\n            return {\r\n                ...state,\r\n                data: payload,\r\n                isAuthed: true,\r\n                token: window.localStorage.token,\r\n            };\r\n        case 'USER:SET_IS_AUTHED':\r\n            return {\r\n                ...state,\r\n                isAuthed: payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default user;","module.exports = __webpack_public_path__ + \"static/media/wave.004b528d.svg\";","module.exports = __webpack_public_path__ + \"static/media/waveBlack.8e9ed252.svg\";","module.exports = __webpack_public_path__ + \"static/media/play.a1d839aa.svg\";","module.exports = __webpack_public_path__ + \"static/media/pause.030b4c1a.svg\";","module.exports = __webpack_public_path__ + \"static/media/checked.05bd65e9.svg\";","module.exports = __webpack_public_path__ + \"static/media/unchecked.70aff14a.svg\";","var map = {\n\t\"./\": 86,\n\t\"./attachments\": 163,\n\t\"./attachments.js\": 163,\n\t\"./dialogs\": 164,\n\t\"./dialogs.js\": 164,\n\t\"./index\": 86,\n\t\"./index.js\": 86,\n\t\"./messages\": 165,\n\t\"./messages.js\": 165,\n\t\"./user\": 166,\n\t\"./user.js\": 166\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 263;","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(\r\n    applyMiddleware(...middleware)\r\n));\r\n\r\nexport default store;","export default ({ isAuth, values, errors }) => {\r\n    const rules = {\r\n        email: (errors, values) => {\r\n            if (!values.email) {\r\n                errors.email = 'Please Enter Email';\r\n            } else if (\r\n                !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)\r\n            ) {\r\n                errors.email = 'Invalid email address';\r\n            }\r\n        },\r\n    \r\n        password: (errors, values) => {\r\n            if (!values.password) {\r\n                errors.password = \"Please Input Password\";\r\n            } else if (\r\n                !isAuth && !/^(?=.*[a-z])(?=.*[0-9])(?=.{8,})/i.test(values.password)\r\n            ) {\r\n                errors.password = isAuth ? \"Invalid Password\" : \"Your password is too easy\";\r\n            };\r\n        },\r\n    \r\n        repassword: (errors, values) => {\r\n            if (!values.repassword) {\r\n                errors.repassword = \"Please repeat password\";\r\n            } else if ( errors.password || values.repassword !== values.password ) {\r\n                errors.repassword = \"Passwords doesn't match\";\r\n            }\r\n        },\r\n\r\n        fullname: (errors, values) => {\r\n            if (!isAuth && !values.fullname) {\r\n                errors.fullname = \"Please input your full name\";\r\n            }\r\n        }\r\n    }\r\n\r\n    Object.keys(values).forEach(key => {\r\n        rules[key] && rules[key](errors, values);\r\n    })\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button as BaseButton} from 'antd';\r\nimport classNames from 'classnames';\r\n\r\nimport 'antd/dist/antd.css';\r\nimport './button.scss';\r\n\r\nconst Button = props => {\r\n    return (\r\n        <BaseButton {...props} className={classNames(props.className, 'button', {\r\n            'button--large': props.size === 'large',\r\n        })}/>\r\n    )\r\n};\r\n\r\nButton.propTypes = {\r\n    className: PropTypes.string\r\n};\r\nexport default Button;","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport './WhiteBlock.scss';\r\n\r\nconst Block = ({ children, className }) => <div className={classNames('block', className)}>{children}</div>;\r\n\r\nexport default Block;","export default (touched, errors, key) => {\r\n    if (touched[key]) {\r\n        if (errors[key]) {\r\n            return 'error';\r\n        } else {\r\n            return 'success';\r\n        }\r\n    }\r\n}","import { notification } from 'antd';\r\n\r\nexport default ({ text, type = 'info', title, duration = 3 }) =>\r\n    notification[type]({\r\n        message: title,\r\n        description: text,\r\n        duration,\r\n    });","import React, { useState, useEffect, useRef } from 'react';\r\n\r\nimport { convertCurrentTime } from 'utils/helpers';\r\n\r\nimport waveSvg from 'assets/img/wave.svg';\r\nimport waveBlackSvg from 'assets/img/waveBlack.svg';\r\nimport playSvg from 'assets/img/play.svg';\r\nimport pauseSvg from 'assets/img/pause.svg';\r\n\r\nconst AudioMessage = ({\r\n    audio,\r\n    isMe\r\n}) => {\r\n    const [ isPlaying, setPlaying ] = useState(false);\r\n    const [ currentTime, setCurrentTime ] = useState(0);\r\n    const [ progress, setProgress ] = useState(0);\r\n\r\n    const audioElem = useRef(null);\r\n\r\n    const togglePlay = () => {\r\n        if (!isPlaying) {\r\n            audioElem.current.play();\r\n        } else {\r\n            audioElem.current.pause();\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const audioElement = audioElem.current;\r\n        if (audioElement) {\r\n            audioElement.addEventListener('playing', () => {\r\n                setPlaying(true);\r\n            }, false);\r\n\r\n            audioElement.addEventListener('ended', () => {\r\n                setPlaying(false);\r\n                setProgress(0);\r\n            }, false);\r\n\r\n            audioElement.addEventListener('pause', () => {\r\n                setPlaying(false);\r\n            }, false);\r\n\r\n            audioElement.addEventListener('timeupdate', () => {\r\n                const duration = audioElement.duration || 0;\r\n                setCurrentTime(audioElement.currentTime);\r\n                setProgress((audioElement.currentTime / duration) * 100)\r\n            }, false);\r\n\r\n            audioElement.addEventListener('loadeddata', () => {\r\n                setCurrentTime(audioElement.duration);\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className='message__audio'>\r\n            <audio ref={audioElem} src={audio} preload='auto'/>\r\n            <div className='message__audio-progress'\r\n                style={{width: progress + '%'}}/>\r\n            <div className=\"message__audio-info\">\r\n                <div className=\"message__audio-btn\">\r\n                    <button onClick={togglePlay}>\r\n                        { isPlaying ?\r\n                            <img src={pauseSvg} alt=\"Pause Icon\"/>\r\n                            : <img src={playSvg} alt=\"Play Icon\"/>\r\n                        }\r\n                    </button>\r\n                </div>\r\n                <div className='message__audio-wave'>\r\n                    <img src={isMe ? waveBlackSvg : waveSvg} alt=\"Wave Icon\"/>\r\n                </div>\r\n                <span className='message__audio-duration'>{\r\n                    convertCurrentTime(currentTime)\r\n                }\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AudioMessage;","export default number => {\r\n    const mins = Math.floor(number / 60);\r\n    const secs = (number % 60).toFixed();\r\n    return `${mins < 10 ? \"0\" : \"\"}${mins}:${secs < 10 ? \"0\" : \"\"}${secs}`;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport {Button, Popover, Input, Icon} from 'antd';\r\nimport reactStringReplace from 'react-string-replace';\r\nimport { Emoji } from 'emoji-mart';\r\n\r\nimport { DateInfo, IconChecked, Avatar } from '../';\r\nimport { AudioMessage } from '../';\r\n\r\nimport './Message.scss';\r\n// import dickSVG from 'assets/img/dick.svg';\r\n\r\nconst Message = ({\r\n    user,\r\n    text,\r\n    createdAt,\r\n    isMe,\r\n    unchecked,\r\n    attachments,\r\n    isAudio,\r\n    isTyping,\r\n    onRemoveMessage,\r\n    setPreviewImage\r\n}) => {\r\n    return (\r\n    <div className={classNames('message', {\r\n        'message--isme'     : isMe,\r\n        'message--is-typing': isTyping,\r\n        'message--is-audio' : isAudio,\r\n        'message--image'    : attachments && attachments.length === 1 && !text})}>\r\n        <div className=\"message__content\">\r\n            <IconChecked isMe={isMe} unchecked={unchecked}/>\r\n            { isMe &&\r\n            <Popover\r\n                content={\r\n                    <div className=\"message__actions\">\r\n                        <Button onClick={onRemoveMessage} type='danger'>Delete</Button>\r\n                    </div>\r\n                }\r\n                trigger='click'>\r\n                    <div className=\"message__icon-actions\">\r\n                        <Button type='link' shape='circle' icon='ellipsis'/>\r\n                    </div>\r\n            </Popover>}\r\n            <div className=\"message__avatar\">\r\n                <Avatar user={user}/>\r\n            </div>\r\n            <div className=\"message__info\">\r\n                {(!attachments.length || (attachments.length > 1 && text) || (attachments.length === 1 && text) || isAudio) &&\r\n                <div className=\"message__bubble\">\r\n                    {(text && !isAudio) && <p className='message__text'>{\r\n                        reactStringReplace(text, /:(.+?):/g, (match) => (\r\n                            // match === 'dick' ? <img key={Math.random()} src={dickSVG}/> : \r\n                            <Emoji emoji={match} set='google' size={22} key={Math.random()}/>\r\n                        ))}</p>}\r\n                    {isTyping && <div className=\"message__typing\">\r\n                        <span className=\"dot one\"/>\r\n                        <span className=\"dot two\"/>\r\n                        <span className=\"dot three\"/>\r\n                    </div>}\r\n                    {isAudio && <AudioMessage\r\n                        audio={attachments[0].url}\r\n                        isMe={isMe}/>}\r\n                </div>}\r\n                    {(attachments && !!attachments.length && !isAudio) &&\r\n                    <div className=\"message__attachments\">\r\n                        {attachments.map(item => (\r\n                            <div\r\n                                key={Math.random()}\r\n                                className='message__attachments-item'>\r\n                                    <Icon type='eye'/>\r\n                                    <img\r\n                                        src={item.url}\r\n                                        onClick={() => setPreviewImage(item.url)}\r\n                                        alt={item.filename}/>\r\n                            </div>\r\n                        ))}\r\n                    </div>}\r\n                <span className=\"message__date\">\r\n                    <DateInfo date={createdAt}/>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)};\r\n\r\nMessage.propTypes = {\r\n    user        : PropTypes.object,\r\n    isMe        : PropTypes.bool,\r\n    avatar      : PropTypes.string,\r\n    text        : PropTypes.string,\r\n    createdAt   : PropTypes.string,\r\n    attachments : PropTypes.array,\r\n    classNames  : PropTypes.string,\r\n    isTyping    : PropTypes.bool,\r\n};\r\n\r\nexport default Message;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\nimport { format, isToday } from 'date-fns';\r\nimport { Icon } from 'antd';\r\nimport reactStringReplace from 'react-string-replace';\r\nimport { Emoji } from 'emoji-mart';\r\n\r\nimport { Avatar } from '../';\r\n\r\nimport { IconChecked } from '../';\r\nimport './DialogsItem.scss';\r\n// import dickSVG from 'assets/img/dick.svg';\r\n\r\nconst getDate = time => {\r\n    time = new Date(time);\r\n\r\n    if (isToday(time)) {\r\n        return format(\r\n            time,\r\n            'HH:mm'\r\n        )\r\n    } else {\r\n        return format(\r\n            time,\r\n            'MM.dd.yyyy'\r\n        )\r\n    }\r\n};\r\n\r\nconst DialogsItem = ({\r\n    _id,\r\n    user,\r\n    currentDialogId, \r\n    isMe,\r\n    onSelect,\r\n    lastMessage,\r\n    }) => (\r\n        <Link to={`/dialogs/${user.fullname.split(' ').join('_')}`}>\r\n            <div className={classNames('dialogs__item', {\r\n                'dialogs__item--online': user.isOnline,\r\n                'dialogs__item--selected': currentDialogId === _id\r\n                })}\r\n                onClick={onSelect.bind(this, _id)}>\r\n                <div className=\"dialogs__item-avatar\">\r\n                    <Avatar user={user} />\r\n                </div>\r\n                <div className=\"dialogs__item-content\">\r\n                    <div className=\"dialogs__item-content-top\">\r\n                        <b>{user.fullname}</b>\r\n                        <span className=\"dialogs__item-content-date\">\r\n                            {getDate(lastMessage.createdAt)}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"dialogs__item-content-bottom\">\r\n                        <p>\r\n                            {lastMessage.text ? reactStringReplace(lastMessage.text, /:(.+?):/g, (match) => (\r\n                                // match === 'dick' ? <img src={dickSVG} style={{ width:  22, height: 22}} /> :\r\n                                <Emoji emoji={match} set='google' size={16} />))\r\n                            : lastMessage.attachments.length && lastMessage.attachments[0].ext === 'ogg' ? \r\n                            (<span><Icon type='audio'/> Voice Message</span>) \r\n                            : (<span><Icon type='file-image'/> Image</span>)}\r\n                        </p>\r\n                        {console.log(isMe)}\r\n                        {isMe && <IconChecked isMe={isMe} unchecked={lastMessage.unchecked} />}\r\n                        {(lastMessage.unchecked > 0 && !isMe) &&\r\n                            <div className='dialogs__item-content-bottom-unchecked-count'>\r\n                                {lastMessage.unchecked > 1 ? lastMessage.unchecked : 1}\r\n                            </div>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n);\r\n\r\nexport default DialogsItem;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport checkedIcon from 'assets/img/checked.svg';\r\nimport unCheckedIcon from 'assets/img/unchecked.svg';\r\n\r\nconst IconChecked = ({ isMe, unchecked }) =>\r\n\r\n    (isMe ?\r\n        (!unchecked ? (\r\n            <img src={checkedIcon} alt=\"CheckedIcon\" className=\"message__icon-checked\"/>\r\n        ) : (\r\n            <img src={unCheckedIcon} alt=\"UnCheckedIcon\" className=\"message__icon-unchecked\"/>\r\n        )) : ''\r\n    );\r\n\r\nIconChecked.propTypes = {\r\n    isMe: PropTypes.bool,\r\n    isChecked: PropTypes.bool\r\n};\r\n\r\nexport default IconChecked;","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow';\r\n\r\nconst DateInfo = ({ date }) => (\r\n    date ?\r\n        (<Fragment>\r\n            {formatDistanceToNow(new Date( date ), {addSuffix: true})}\r\n        </Fragment>) : ''\r\n);\r\n\r\nDateInfo.propTypes = {\r\n    date: PropTypes.string\r\n};\r\n\r\nexport default DateInfo;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Input, Empty } from 'antd';\r\nimport { orderBy } from 'lodash';\r\n\r\nimport './Dialogs.scss';\r\n\r\nimport { DialogsItem } from '../';\r\n\r\nconst Dialogs = ({\r\n    items,\r\n    myId,\r\n    onSearch,\r\n    inputValue,\r\n    currentDialogId,\r\n    onSelectDialog\r\n}) => (\r\n    <div className=\"dialogs-wrapper\">\r\n        <div className=\"chat__sidebar-search\">\r\n            <Input.Search\r\n                placeholder='Search for dialogs'\r\n                onChange={e => onSearch(e.target.value)}\r\n                value={inputValue}/>\r\n        </div>\r\n        <div className=\"dialogs\">\r\n        {items.length ? orderBy(items, ['createdAt'], ['desc']).map(item => (\r\n            console.log(item.lastMessage) ||\r\n            <DialogsItem\r\n                user={item.author._id !== myId ? item.author : item.partner}\r\n                isMe={item.lastMessage.user._id === myId}\r\n                onSelect={onSelectDialog}\r\n                key={item._id}\r\n                {...item}\r\n                lastMessage={item.lastMessage}\r\n                currentDialogId={currentDialogId}/>))\r\n            : <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />}\r\n        </div>\r\n    </div>\r\n);\r\n\r\nDialogs.propTypes = {\r\n    users: PropTypes.array\r\n};\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Empty, Icon, Modal } from 'antd';\r\nimport classNames from 'classnames';\r\n\r\nimport { Message } from '../';\r\n\r\nimport './Messages.scss';\r\n\r\nconst Messages = ({\r\n    onRemoveMessage,\r\n    baseRef,\r\n    isLoading,\r\n    items,\r\n    myId,\r\n    user,\r\n    previewImage,\r\n    setPreviewImage,\r\n}) => {\r\n    return  <div\r\n        ref={baseRef}\r\n        className={classNames(\"messages\", {\r\n            'messages--loading': isLoading\r\n        })}>\r\n        {\r\n            isLoading || !user ?\r\n            (<Icon type=\"loading\" spin />)\r\n            : !items || !items.length ? <Empty description=\"Select dialog to start messaging or start new dialog by pressing button right to Dialogs List\"/>\r\n            : (<div className='messages-wrapper'>\r\n                {items.map(item =>\r\n                    <Message\r\n                        isAudio={item.attachments.length && item.attachments[0].ext === 'ogg'}\r\n                        onRemoveMessage={onRemoveMessage.bind(this, item._id)}\r\n                        setPreviewImage={setPreviewImage}\r\n                        key={Math.random()}\r\n                        {...item}\r\n                        isMe={item.user._id === myId}/>\r\n                )}</div>)\r\n    }\r\n    <Modal visible={!!previewImage} onCancel={() => setPreviewImage(null)} footer={null}>\r\n        <img src={previewImage} style={{width: '100%'}} alt=\"Preview\"/>\r\n    </Modal>\r\n    </div>\r\n};\r\n\r\nMessages.propTypes = {\r\n    items: PropTypes.array,\r\n};\r\n\r\nexport default Messages;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { generateAvatarFromHash } from 'utils/helpers';\r\n\r\nimport './avatar.scss';\r\n\r\nconst Avatar = ({ user, style }) => {\r\n    if (user.avatar) {\r\n        return (\r\n            <img \r\n                style={style}\r\n                src={user.avatar}\r\n                alt={`${user.fullname} avatar`}/>\r\n        )\r\n    } else {\r\n        const color = generateAvatarFromHash(user._id),\r\n            firstCharOfName = user.fullname[0];\r\n\r\n        return (\r\n            <div className='avatar avatar--empty'\r\n                style={{\r\n                    ...style,\r\n                    background: `linear-gradient(135deg, ${color.color}, ${color.colorLighten} 96%)`\r\n                }}>\r\n                { firstCharOfName }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nAvatar.propTypes = {\r\n    user: PropTypes.object,\r\n};\r\n\r\nexport default Avatar;","import tinycolor from 'tinycolor2';\r\n\r\n\r\nexport default hash => {\r\n    const [r, g, b] = hash\r\n        .toString()\r\n        .substr(-3)\r\n        .split('')\r\n        .map(char => (char.charCodeAt(0) > 255) ? 255 : char.charCodeAt(0));\r\n    const color = tinycolor({r, g, b});\r\n\r\n    return {\r\n        color: color\r\n            .lighten(10)\r\n            .saturate(10)\r\n            .toHexString(),\r\n        colorLighten: color\r\n            .lighten(30)\r\n            .saturate(30)\r\n            .toHexString()\r\n    };\r\n}","import React from 'react';\r\nimport { Input, Button, Icon } from 'antd';\r\nimport { UploadField } from '@navjobs/upload';\r\nimport { Picker } from 'emoji-mart';\r\nimport classNames from 'classnames';\r\n\r\nimport { FilesUploader } from '..';\r\nimport './ChatInput.scss';\r\n// import dickSVG from 'assets/img/dick.svg';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst ChatInput = ({\r\n    toggleEmojiTab,\r\n    emojiTabIsActive,\r\n    setValue,\r\n    value,\r\n    handleEmojiSelect,\r\n    handleSendMessage,\r\n    handleFileUpload,\r\n    attachments,\r\n    removeAttachment,\r\n    isRecording,\r\n    onRecord,\r\n    onStopRecording,\r\n}) => {\r\n    return (\r\n            <div className=\"chat-input\">\r\n                <div>\r\n                    <div className=\"chat-input__actions\">\r\n                        <div className={classNames(\"chat-input__emoji-picker\", {\r\n                            'chat-input__emoji-picker--visible': emojiTabIsActive,\r\n                        })}>\r\n                            <Picker set='google' onSelect={(emoji) => handleEmojiSelect(emoji)}/>\r\n                        </div>\r\n                        <Button\r\n                            onClick={toggleEmojiTab}\r\n                            type='link'\r\n                            shape='circle'\r\n                            className=\"chat-input__smile-btn\"\r\n                            icon=\"smile\"/>\r\n                        {/* <img src={dickSVG} className='chat-input__send-dick' onClick={() => setValue(':dick:')}/> */}\r\n                        <UploadField\r\n                            onFiles={handleFileUpload}\r\n                            containerProps={{\r\n                                className: 'chat-input__actions-upload-photo'\r\n                            }}\r\n                            uploadProps={{\r\n                                accept: '.jpg,.png,.jpeg,.pdf,.webp,.gif',\r\n                                multiple: \"multiple\"\r\n                            }}>\r\n                            <Button\r\n                                type='link'\r\n                                shape='circle'\r\n                                icon='camera'/>\r\n                        </UploadField>\r\n                    </div>\r\n                    {!isRecording &&\r\n                    <TextArea\r\n                        style={{height: 20}}\r\n                        autosize={{ maxRows: 6 }}\r\n                        onChange={ e => setValue(e.target.value) }\r\n                        onKeyUp={ handleSendMessage }\r\n                        placeholder=\"Input your message\"\r\n                        value={ value }/>}\r\n                    { isRecording &&\r\n                        <div className=\"chat-input__record-status\">\r\n                            <i className='record-icon'/>\r\n                            <span>Recording</span>\r\n                            <Icon type='close' onClick={onStopRecording}/>\r\n                        </div>}\r\n                        {isRecording || value || (attachments && attachments.length) ?\r\n                        <Button type='link' shape='circle' icon=\"check-circle\" onClick={handleSendMessage}/>\r\n                        : (<div className=\"chat-input__record-btn\">\r\n                                <Button\r\n                                    type='link'\r\n                                    shape='circle'\r\n                                    icon=\"audio\"\r\n                                    onClick={onRecord}/>\r\n                            </div>)}\r\n                </div>\r\n                <div className='chat-input-attachments'>\r\n                    <FilesUploader attachments={attachments} removeAttachment={removeAttachment}/>\r\n                </div>\r\n            </div>);\r\n};\r\n\r\nexport default ChatInput;","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport './Status.scss';\r\n\r\nconst Status = ({ online, fullname, isMe }) => (\r\n    <div className=\"chat__dialog-header-info\">\r\n        <b className=\"chat__dialog-fullname\">{fullname}</b>\r\n        {!isMe &&\r\n        <span className={classNames('status', {\r\n            'status--online': online\r\n        })}>\r\n            {online ? 'online': 'offline'}\r\n        </span>\r\n        }\r\n    </div>\r\n);\r\n\r\nexport default Status;","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = window.location.origin;\r\naxios.defaults.headers.common['token'] = window.localStorage.token;\r\n\r\nwindow.axios = axios;\r\n\r\nexport default axios;","import socketIO from 'socket.io-client';\r\n\r\nconst sockets = socketIO(window.location.origin.replace('3000', '1337'));\r\n\r\nexport default sockets;","import { axios } from 'core';\r\n\r\nconst dialogsApi = {\r\n    getAll: () => axios.get('/dialogs'),\r\n    create: ({partnerId, text}) => axios.post('/dialogs', {\r\n        partner: partnerId,\r\n        text: text\r\n    }),\r\n};\r\n\r\nexport default dialogsApi;","import { axios } from 'core';\r\n\r\nconst messagesApi = {\r\n    getDialogById: dialogId => axios.get(`/messages/${dialogId}`),\r\n    send: ({text, dialogId, attachments = []}) => axios.post(`/messages`, {\r\n        text: text,\r\n        dialog: dialogId,\r\n        attachments\r\n    }),\r\n    removeById: id => axios.delete(`/messages/${id}`),\r\n};\r\n\r\nexport default messagesApi;","import {axios} from 'core';\r\n\r\nconst userApi = {\r\n    login: postData => axios.post('/user/login', postData),\r\n    getMe: () => axios.get('/user/me'),\r\n    verifyHash: hash => axios.get(`/user/verify?hash=${hash}`),\r\n    register: postData => axios.post('/user/register', postData),\r\n    findUsers: query => axios.get(`/user/find?query=${query}`)\r\n};\r\n\r\nexport default userApi;","import { axios } from 'core';\r\n\r\nconst uploadApi = {\r\n    upload: file => {\r\n        const formData = new FormData();\r\n\r\n        formData.append('file', file);\r\n        console.log(file);\r\n        return axios.post('/files', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n    },\r\n};\r\n\r\nexport default uploadApi;","import React, { useEffect, useState } from 'react';\r\nimport { Result, Button } from 'antd';\r\n\r\nimport { userApi } from 'utils/api';\r\nimport { Block } from 'components';\r\n\r\nconst VerifyEmail = ({ location, history }) => {\r\n    const [verified, setVerified] = useState(false),\r\n        [statusMessage, setStatusMessage] = useState(''),\r\n        [status, setStatus] = useState('success');\r\n\r\n    useEffect(() => {\r\n        const hash = location.search.split('hash=')[1];\r\n\r\n        if (hash) {\r\n            userApi\r\n            .verifyHash(hash)\r\n            .then(({ data }) => {\r\n                setStatus(data.status);\r\n\r\n                if (data.status === 'success') {\r\n                    setVerified(true);\r\n                }\r\n\r\n                setStatusMessage(data.message);\r\n            })\r\n            .catch(() => {\r\n                setVerified(false);\r\n                setStatus('Error');\r\n\r\n                setStatusMessage('Confirmation error');\r\n            })\r\n        }\r\n    })\r\n\r\n    return (\r\n        <Block>\r\n            <Result\r\n                status={status}\r\n                title={status.toUpperCase()}\r\n                subTitle={\r\n                    status === 'success' && !verified ?\r\n                    \"Please check your email to verify your account\"\r\n                    : statusMessage\r\n                }\r\n                extra={\r\n                    status === 'success' && verified &&\r\n                        <Button \r\n                            onClick={() => {history.push('/login')}}\r\n                            type=\"primary\">\r\n                                Login\r\n                        </Button>}\r\n        />\r\n    </Block>\r\n)};\r\n\r\nexport default VerifyEmail;","import { dialogsApi } from \"utils/api\";\r\n\r\nconst actions = {\r\n    setDialogs: items => ({\r\n        type: 'DIALOGS:SET_ITEMS',\r\n        payload: items,\r\n    }),\r\n    setCurrentDialogId: id => ({\r\n        type: 'DIALOGS:SET_CURRENT_DIALOG_ID',\r\n        payload: id,\r\n    }),\r\n    fetchDialogs: () => dispatch => {\r\n        dialogsApi.getAll().then(({ data }) => {\r\n            dispatch(actions.setDialogs(data));\r\n        });\r\n    }\r\n};\r\n\r\nexport default actions;","import { messagesApi } from 'utils/api';\r\n\r\nconst messagesActions = {\r\n    setMessages: items => ({\r\n        type: 'MESSAGES:SET_ITEMS',\r\n        payload: items,\r\n    }),\r\n    addMessage: message => (dispatch, getState) => {\r\n        const { dialogs } = getState(),\r\n                { currentDialogId } = dialogs;\r\n        \r\n        if (currentDialogId === message.dialog._id) {\r\n            dispatch({\r\n                type: 'MESSAGES:ADD_MESSAGE',\r\n                payload: message\r\n            })\r\n        }\r\n    },\r\n    setIsLoading: bool => ({\r\n        type: 'MESSAGES:SET_IS_LOADING',\r\n        payload: bool,\r\n    }),\r\n    removeMessageById: messageId => dispatch => {\r\n        console.log(`Remove request for: ${messageId}`);\r\n        messagesApi\r\n            .removeById(messageId)\r\n            .then(() => {\r\n                dispatch({\r\n                    type: 'MESSAGES:REMOVE_MESSAGE',\r\n                    payload: messageId\r\n                })\r\n            })\r\n            .catch(() => {\r\n                dispatch(messagesActions.setIsLoading(false));\r\n            })\r\n    },\r\n    fetchMessageSend: (text, dialogId, attachments) => dispatch => {\r\n        messagesApi.send(text, dialogId, attachments)\r\n    },\r\n    fetchMessages: dialogId => dispatch => {\r\n        dispatch(messagesActions.setIsLoading(true));\r\n\r\n        messagesApi\r\n            .getDialogById(dialogId)\r\n            .then(({data}) => {\r\n                dispatch(messagesActions.setMessages(data));\r\n            })\r\n            .catch(() => {\r\n                dispatch(messagesActions.setIsLoading(false));\r\n            })\r\n    }\r\n};\r\n\r\nexport default messagesActions;","import {userApi} from 'utils/api';\r\nimport {openNotification} from 'utils/helpers';\r\n\r\nconst actions = {\r\n    setUserData: data => ({\r\n        type: 'USER:SET_DATA',\r\n        payload: data\r\n    }),\r\n    setIsAuthed: bool => ({\r\n        type: 'USER:SET_IS_AUTHED',\r\n        payload: bool,\r\n    }),\r\n    fetchUserData: () => dispatch => {\r\n        userApi\r\n            .getMe()\r\n            .then(({ data }) => {\r\n                dispatch(actions.setUserData(data));\r\n            })\r\n            .catch(() => {\r\n                dispatch(actions.setIsAuthed(false));\r\n                delete window.localStorage.token;\r\n            });\r\n    },\r\n    fetchUserRegister: postData => dispatch => {\r\n        return userApi.register(postData)\r\n    },\r\n    fetchUserLogin: postData => dispatch => {\r\n        return userApi\r\n                    .login(postData)\r\n                    .then(({ data }) => {\r\n                        const { token } = data;\r\n                        \r\n                        dispatch(actions.setUserData(data));\r\n\r\n                        openNotification({\r\n                            title: 'success',\r\n                            type: 'success'\r\n                        });\r\n\r\n                        window.axios.defaults.headers.common['token'] = token;\r\n                        window.localStorage['token'] = token;\r\n                        dispatch(actions.fetchUserData());\r\n                        dispatch(actions.setIsAuthed(true));\r\n\r\n                        return data;\r\n                    })\r\n                    .catch(() => {\r\n                        openNotification({\r\n                            title: 'Login Failed',\r\n                            text: 'Error in email or password',\r\n                            type: 'error'\r\n                        })\r\n                    })\r\n    }\r\n};\r\n\r\nexport default actions;","const actions = {\r\n    setAttachments: items => ({\r\n        type: \"ATTACHMENTS:SET_ITEMS\",\r\n        payload: items\r\n    }),\r\n    removeAttachment: file => ({\r\n        type: \"ATTACHMENTS:REMOVE_FILE\",\r\n        payload: file\r\n    })\r\n};\r\n\r\nexport default actions;","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { dialogsActions } from \"redux/actions\";\r\nimport { Dialogs as BaseDialogs } from 'components';\r\nimport socket from 'core/socket';\r\n\r\nconst Dialogs = ({ \r\n    fetchDialogs, \r\n    currentDialogId, \r\n    setCurrentDialogId, \r\n    items, \r\n    myId }) => {\r\n    const [inputValue, setValue] = useState(''),\r\n        [filtered, setFiltered ] = useState(Array.from(items));\r\n\r\n    const onChangeInput = (value = '') => {\r\n        setFiltered(\r\n            items.filter(\r\n                dialog => {\r\n                    let user = {};\r\n\r\n                    if (dialog.author._id === myId) {\r\n                        user = dialog.partner;\r\n                    } else {\r\n                        user = dialog.author;\r\n                    }\r\n                    \r\n                    return user.fullname.toLowerCase().indexOf(value.toLowerCase()) >= 0\r\n                }\r\n            )\r\n        );\r\n\r\n        setValue(value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!items.length) {\r\n            fetchDialogs();\r\n        } else {\r\n            setFiltered(items);\r\n        }\r\n    }, [items, fetchDialogs]);\r\n\r\n    socket.on('SERVER:DIALOG_CREATED', () => {\r\n        fetchDialogs();\r\n    });\r\n\r\n    socket.on('MESSAGES:NEW_MESSAGE', () => {\r\n        fetchDialogs();\r\n    });\r\n\r\n    return (\r\n        <BaseDialogs\r\n            myId={myId}\r\n            items={filtered}\r\n            onSearch={onChangeInput}\r\n            inputValue={inputValue}\r\n            onSelectDialog={setCurrentDialogId}\r\n            currentDialogId={currentDialogId}/>\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    ({ dialogs }) => dialogs,\r\n    dialogsActions\r\n)(Dialogs);","import React, { useEffect, useState, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { messagesActions } from \"redux/actions\";\r\nimport { Messages as BaseMessages } from 'components';\r\nimport socket from 'core/socket';\r\n\r\nconst Messages = ({\r\n    items,\r\n    fetchMessages,\r\n    currentDialogId,\r\n    removeMessageById,\r\n    fetchMessageChange,\r\n    addMessage,\r\n    isLoading,\r\n    myId,\r\n    user\r\n}) => {\r\n    const messagesRef = useRef(null);\r\n\r\n    const [previewImage, setPreviewImage] = useState(null);\r\n\r\n\r\n    const onDialogChange = data => {\r\n        addMessage(data);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (currentDialogId) {\r\n            fetchMessages(currentDialogId);\r\n        }\r\n\r\n        socket.on('MESSAGES:NEW_MESSAGE', onDialogChange);\r\n\r\n        return () => {\r\n            socket.removeListener('MESSAGES:NEW_MESSAGE', onDialogChange);\r\n        }\r\n    }, [currentDialogId]);\r\n\r\n    useEffect(() => {\r\n        messagesRef.current.scrollTop = messagesRef.current.scrollHeight;\r\n    }, [items]);\r\n\r\n    return (\r\n        <BaseMessages\r\n            user={user}\r\n            onRemoveMessage={removeMessageById}\r\n            myId={myId}\r\n            baseRef={messagesRef}\r\n            isLoading={isLoading}\r\n            items={items}\r\n            setPreviewImage={setPreviewImage}\r\n            previewImage={previewImage}\r\n        />\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    ({ dialogs, user, messages }) => ({\r\n        currentDialogId: dialogs.currentDialogId,\r\n        items: messages.items,\r\n        isLoading: messages.isLoading,\r\n        user: user.data,\r\n    }),\r\n    messagesActions\r\n)(Messages);","import React, {useEffect, useState} from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { messagesActions, attachmentsActions } from 'redux/actions';\r\nimport { ChatInput as ChatInputBase } from 'components';\r\nimport { uploadApi } from \"utils/api\";\r\n\r\nconst ChatInput = ({\r\n    fetchMessageSend,\r\n    setAttachments,\r\n    removeAttachment,\r\n    dialogs: { currentDialogId },\r\n    attachments,\r\n}) => {\r\n    window.navigator.getUserMedia = (window.navigator.getUserMedia ||\r\n        window.navigator.mozGetUserMedia ||\r\n        window.navigator.msGetUserMedia ||\r\n        window.navigator.webkitGetUserMedia);\r\n\r\n    const [value, setValue] = useState(''),\r\n        [emojiTabIsActive, setEmojiTabIsActive] = useState(false),\r\n        [isRecording, setIsRecording] = useState(false),\r\n        [mediaRecorder, setMediaRecorder] = useState(null);\r\n\r\n    const toggleEmojiTab = () => {\r\n        setEmojiTabIsActive(!emojiTabIsActive);\r\n    };\r\n\r\n    const handleSendMessage = (e) => {\r\n        if (e.keyCode === 13 || e.type === 'click') {\r\n            mediaRecorder.stop();\r\n            if (attachments && attachments.length) {\r\n                fetchMessageSend({\r\n                    text: value,\r\n                    dialog: currentDialogId,\r\n                    attachments: attachments.map(item => item.uid)});\r\n                setAttachments([]);\r\n            } else if (value) {\r\n                fetchMessageSend(value, currentDialogId);\r\n            }\r\n            setValue('');\r\n            setIsRecording(false);\r\n        }\r\n    };\r\n\r\n    const sendAudio = audioId => {\r\n        fetchMessageSend({\r\n            text: value,\r\n            dialogId: currentDialogId,\r\n            attachments: [audioId]\r\n        })\r\n    };\r\n\r\n    const handleEmojiSelect = ({ colons }) => {\r\n        setValue((value + \" \" + colons).trim());\r\n    };\r\n\r\n    const handleOutsideClick = (el, e) => {\r\n        if (el && !el.contains(e.target)) {\r\n            setEmojiTabIsActive(false);\r\n        }\r\n    };\r\n\r\n    const onRecord = () => {\r\n        if (navigator.getUserMedia) {\r\n            navigator.getUserMedia({ audio: true }, onRecording, onError)\r\n        }\r\n    };\r\n\r\n    const onHideRecording = () => {\r\n        mediaRecorder.stop();\r\n        setIsRecording(false);\r\n    };\r\n\r\n    const onRecording = stream => {\r\n        const recorder = (new MediaRecorder(stream));\r\n        setMediaRecorder(recorder);\r\n\r\n        recorder.start();\r\n\r\n        recorder.onstart = () => {\r\n            setIsRecording(true);\r\n        };\r\n\r\n        recorder.onstop = () => {\r\n            setIsRecording(false);\r\n        };\r\n\r\n        recorder.ondataavailable = e => {\r\n            const audioFile = new File([e.data], 'audio.ogg', {type: 'audio/ogg'});\r\n            uploadApi.upload(audioFile).then(({ data }) => {\r\n                sendAudio(data.file._id);\r\n            });\r\n        }\r\n    };\r\n\r\n    const onError = err => {\r\n        console.log('Error: ' + err);\r\n    };\r\n\r\n    const handleFileUpload = async files => {\r\n        let uploaded = attachments;\r\n        for (const file of files) {\r\n            const uid = Math.round(Math.random() * 1000);\r\n\r\n            uploaded = [\r\n                ...uploaded,\r\n                {\r\n                    uid: uid,\r\n                    name: file.name,\r\n                    status: 'uploading'\r\n                }];\r\n\r\n            setAttachments(uploaded);\r\n\r\n            await uploadApi\r\n                .upload(file)\r\n                .then(({ data }) => {\r\n                    uploaded = uploaded.map(item => {\r\n                        if (item.uid === uid) {\r\n                            return {\r\n                                status: 'done',\r\n                                uid: data.file._id,\r\n                                name: data.file.filename,\r\n                                url: data.file.url,\r\n                            };\r\n                        }\r\n                        return item;\r\n                    })\r\n                })\r\n                .catch(() => {\r\n                    return {\r\n                        status: 'error'\r\n                    }\r\n                })\r\n        }\r\n        setAttachments(uploaded);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const emojiTabButton = document.querySelector('.chat-input__smile-btn');\r\n\r\n        document.addEventListener('click', handleOutsideClick.bind(this, emojiTabButton));\r\n\r\n        return () => {\r\n            document.addEventListener('click', handleOutsideClick.bind(this, emojiTabButton));\r\n        }\r\n    });\r\n\r\n    if (!currentDialogId) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <ChatInputBase\r\n            toggleEmojiTab={toggleEmojiTab}\r\n            emojiTabIsActive={emojiTabIsActive}\r\n            setValue={setValue}\r\n            value={value}\r\n            handleEmojiSelect={handleEmojiSelect}\r\n            handleSendMessage={handleSendMessage}\r\n            handleFileUpload={handleFileUpload}\r\n            attachments={attachments}\r\n            removeAttachment={removeAttachment}\r\n            isRecording={isRecording}\r\n            onRecord={onRecord}\r\n            onStopRecording={onHideRecording}\r\n        />\r\n    )\r\n};\r\n\r\nexport default connect(\r\n    ({dialogs, attachments}) => ({\r\n        dialogs,\r\n        attachments: attachments.items\r\n    }),\r\n    {...messagesActions, ...attachmentsActions}\r\n)(ChatInput);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Status as StatusBase } from 'components';\r\n\r\nconst Status = ({ currentDialogId, user, dialogs }) => {\r\n    const currentDialog = dialogs.filter(dialog => dialog._id === currentDialogId)[0];\r\n\r\n    if (!dialogs.length || !currentDialogId) {\r\n        return ( user &&\r\n            <StatusBase\r\n                fullname={user.fullname}\r\n                isMe\r\n                />\r\n        );\r\n    }\r\n\r\n    let partner = {};\r\n\r\n    if (currentDialog.author._id === user._id) {\r\n        partner = currentDialog.partner;\r\n    } else {\r\n        partner = currentDialog.author;\r\n    }\r\n\r\n    return (\r\n        <StatusBase\r\n            fullname={partner.fullname}\r\n            online={partner.isOnline}\r\n        />\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    ({ dialogs, user }) => ({\r\n        currentDialogId: dialogs.currentDialogId,\r\n        dialogs: dialogs.items,\r\n        user: user.data\r\n    })\r\n)(Status);","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Sidebar as SidebarBase } from 'components';\r\nimport { userApi, dialogsApi } from 'utils/api';\r\nimport { dialogsActions } from 'redux/actions';\r\nimport { socket } from 'core';\r\n\r\n\r\nconst Sidebar = ({\r\n    user,\r\n    getAll\r\n}) => {\r\n    const [isVisible, setIsVisible]         = useState(false),\r\n        [inputValue, setInputValue]         = useState(''),\r\n        [users, setUsers]                   = useState([]),\r\n        [isSearching, setIsSearching]       = useState(false),\r\n        [selectedUserId, setSelectedUserId] = useState(''),\r\n        [messageText, setMessageText]       = useState('');\r\n\r\n    const handleShow = () => {\r\n        setIsVisible(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setIsVisible(false);\r\n    };\r\n\r\n    const handleInputValueChange = value => {\r\n        setInputValue(value);\r\n    };\r\n\r\n    const onSelectUser = userId => {\r\n        setSelectedUserId(userId);\r\n    };\r\n\r\n    const onAddDialogs = () => {\r\n        dialogsApi\r\n            .create({\r\n                partnerId: selectedUserId,\r\n                text: messageText,\r\n            })\r\n            .then(() => {\r\n                handleClose();\r\n                setIsSearching(false);\r\n                socket.on('DIALOGS:DIALOG_CREATED', getAll);\r\n            })\r\n            .catch(() => {\r\n                setIsSearching(false);\r\n            })\r\n    };\r\n\r\n    const onTextAreaChange = e => {\r\n        setMessageText(e.target.value);\r\n    };\r\n\r\n    const onSearch = value => {\r\n        setIsSearching(true);\r\n        userApi\r\n            .findUsers(value)\r\n            .then(({ data }) => {\r\n                setIsSearching(false);\r\n                setUsers(data);\r\n            })\r\n            .catch(() => {\r\n                setIsSearching(true);\r\n            })\r\n    };\r\n\r\n    return(\r\n    <div>\r\n        <SidebarBase\r\n            user={user}\r\n            onShow={handleShow}\r\n            onClose={handleClose}\r\n            isVisible={isVisible}\r\n            isSearching={isSearching}\r\n            inputValue={inputValue}\r\n            onModalOk={onAddDialogs}\r\n            onChangeInput={handleInputValueChange}\r\n            onSearch={onSearch}\r\n            onSelectUser={onSelectUser}\r\n            onTextAreaChange={onTextAreaChange}\r\n            users={users}\r\n            messageText={messageText}\r\n            />\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default connect(({ user }) => ({user: user.data}), dialogsActions)(Sidebar);","import React from 'react';\r\nimport { Icon, Modal, Button, Select, Input, Form } from 'antd';\r\n\r\nimport { Dialogs } from 'containers';\r\n// import { Avatar } from 'components';\r\n\r\n\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\n\r\nconst Sidebar = ({\r\n    users,\r\n    user,\r\n    isVisible,\r\n    onShow,\r\n    onClose,\r\n    onChangeInput,\r\n    onSelectUser,\r\n    inputValue,\r\n    isSearching,\r\n    onSearch,\r\n    onModalOk,\r\n    onTextAreaChange,\r\n    messageText,\r\n}) => {\r\n    const options = users.map(user => <Option key={user._id} style={{display: 'flex', alignItems: 'center'}}>\r\n        {/* <Avatar style={{\r\n            width: '30px',\r\n            height: '30px',\r\n            fontSize: '14px',\r\n            marginRight: '5px'\r\n        }}\r\n        user={user}/> */}\r\n        {user.fullname}\r\n        <span style={{\r\n            color: 'lightgray',\r\n            marginLeft: 5\r\n        }}>\r\n            {user.email}\r\n        </span>\r\n        </Option>);\r\n    \r\n    return (\r\n    <div className=\"chat__sidebar\">\r\n        <div className=\"chat__sidebar-header\">\r\n            <div>\r\n                <Icon type=\"team\" style={{color: 'rgba(0, 0, 0, .6)'}}/>\r\n                <span>\r\n                    Dialogs List\r\n                </span>\r\n            </div>\r\n            <Button\r\n                onClick={onShow}\r\n                type='link'\r\n                shape='circle'\r\n                icon='form'\r\n                style={{color: 'rgba(0, 0, 0, .6)'}}/>\r\n            <Modal\r\n                visible={isVisible}\r\n                title='Start new dialog'\r\n                onClose={onClose}\r\n                footer={[\r\n                    <Button key='back' onClick={onClose}>\r\n                        Cancel\r\n                    </Button>,\r\n                    <Button\r\n                        disabled={!messageText}\r\n                        key='submit'\r\n                        type='primary'\r\n                        loading={isSearching}\r\n                        onClick={onModalOk}>\r\n                        Write!\r\n                    </Button>,\r\n                ]}>\r\n                <Form>\r\n                    <Form.Item label={'Input User\\'s name or email'}>\r\n                        <Select\r\n                            value={inputValue}\r\n                            onChange={onChangeInput}\r\n                            onSearch={onSearch}\r\n                            onSelect={onSelectUser}\r\n                            style={{width: '100%'}}\r\n                            placeholder='Find user by name or email'\r\n                            notFoundContent='Nobody found :('\r\n                            defaultActiveFirstOption={false}\r\n                            showArrow={false}\r\n                            filterOption={false}\r\n                            showSearch\r\n                            >\r\n                            {options}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item label={'Input your message'}>\r\n                        <TextArea\r\n                            style={{marginTop: 10}}\r\n                            onChange={onTextAreaChange}\r\n                            value={messageText}\r\n                            placeholder=\"Input your message here\"\r\n                            autosize={{\r\n                                minRows: 1,\r\n                                maxRows: 6,\r\n                            }}\r\n                        />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        </div>\r\n        <div className=\"chat__sidebar-dialogs\">\r\n        <Dialogs\r\n            myId={user && user._id}/>\r\n        </div>\r\n    </div>\r\n    );\r\n};\r\n\r\nSidebar.defaultProps = {\r\n    users: []\r\n};\r\n\r\nexport default Sidebar;","import React, {useEffect, useState} from 'react';\r\nimport { Upload, Modal } from 'antd';\r\n\r\nfunction getBase64(file) {\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n    });\r\n}\r\n\r\nconst FilesUploader = ({ attachments, removeAttachment }) => {\r\n    const [state, setState] = useState({\r\n        previewVisible: false,\r\n        previewImage: \"\",\r\n        fileList: attachments\r\n    });\r\n\r\n    useEffect(() => {\r\n        setState({\r\n            ...state,\r\n            fileList: attachments,\r\n        });\r\n    }, [attachments]);\r\n\r\n    const handleCancel = () => setState({...state, previewVisible: false});\r\n\r\n    const handlePreview = async file => {\r\n        console.log(file);\r\n        if (!file.url && !file.preview) {\r\n            file.preview = await getBase64(file.originalFileObj);\r\n        }\r\n\r\n        setState({\r\n            ...state,\r\n            previewImage: file.url || file.preview,\r\n            previewVisible: true,\r\n        })\r\n    };\r\n\r\n    const handleChange = ({ fileList }) => setState({ fileList });\r\n\r\n    return (\r\n        <div className=\"clearfix\">\r\n            <Upload\r\n                action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                listType=\"picture-card\"\r\n                fileList={state.fileList}\r\n                onPreview={handlePreview}\r\n                onChange={handleChange}\r\n                onRemove={file => removeAttachment(file)}/>\r\n            <Modal visible={state.previewVisible} footer={null} onCancel={handleCancel}>\r\n                <img alt=\"example\" style={{ width: '100%' }} src={state.previewImage} />\r\n            </Modal>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default FilesUploader;","import React from 'react';\r\nimport {Form, Icon, Input} from \"antd\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport {Button, Block} from \"components\";\r\nimport { validateField } from 'utils/helpers';\r\n\r\nconst LoginForm = props => {\r\n    const {\r\n        values,\r\n        touched,\r\n        errors,\r\n        handleChange,\r\n        handleBlur,\r\n        handleSubmit,\r\n        isValid,\r\n        isSubmitting,\r\n    } = props;\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"auth__top\">\r\n                <h2>Enter account</h2>\r\n                <p>Please enter your account</p>\r\n            </div>\r\n            <Block>\r\n                <Form className=\"login-form\">\r\n                    <Form.Item\r\n                        validateStatus={\r\n                            validateField(touched, errors, 'email')\r\n                        }\r\n                        help={\r\n                            !touched.email ? '' : errors.email || ''\r\n                        }>\r\n                        <Input\r\n                            id='email'\r\n                            size='large'\r\n                            prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                            placeholder=\"E-mail\"\r\n                            values={values.email}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        validateStatus={\r\n                            validateField(touched, errors, 'password')\r\n                        }\r\n                        help={!touched.password ? '' : errors.password || ''}>\r\n                        <Input\r\n                            id='password'\r\n                            size='large'\r\n                            prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={values.password}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}/>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        {isSubmitting && !isValid && <span>Error!</span>}\r\n                        <Button\r\n                                disabled={isSubmitting}\r\n                                onClick={handleSubmit}\r\n                                size='large'\r\n                                type='primary'\r\n                                htmlType=\"submit\"\r\n                                className=\"login-form-button button\">\r\n                            Log in\r\n                        </Button>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Link to='register'\r\n                            className='auth__register-link'>\r\n                            Register\r\n                        </Link>\r\n                    </Form.Item>\r\n                </Form>\r\n            </Block>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoginForm;","import LoginForm from './containers/LoginForm';\r\n\r\nexport default LoginForm;","import { withFormik } from 'formik';\r\n\r\nimport store from 'redux/store';\r\nimport validateForm from 'utils/validate';\r\nimport LoginForm from '../components/LoginForm';\r\nimport { userActions } from 'redux/actions';\r\n\r\n\r\nconst LoginFormContainer = withFormik({\r\n    mapPropsToValues: () => ({\r\n        email: '',\r\n        password: ''\r\n    }),\r\n    validate: values => {\r\n        let errors = {};\r\n\r\n        validateForm({ isAuth: true, values: values, errors: errors});\r\n\r\n        return errors;\r\n    },\r\n    handleSubmit: (values, { setSubmitting, props }) => {\r\n        store.dispatch(userActions\r\n            .fetchUserLogin(values))\r\n            .then(({ status }) => {\r\n                if (status === 'success') {\r\n                    props.history.push('/');\r\n                }\r\n                setSubmitting(false);\r\n            })\r\n            .catch(() => setSubmitting(false));\r\n    },\r\n    displayName: 'LoginForm',\r\n})(LoginForm);\r\n\r\nexport default LoginFormContainer;","import React from 'react';\r\nimport { Form, Icon, Input } from \"antd\";\r\nimport { Button, Block } from \"../../../components\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { validateField } from '../../../utils/helpers';\r\n\r\nconst RegisterForm = props => {\r\n    const success = true;\r\n\r\n    const  {\r\n        values,\r\n        touched,\r\n        errors,\r\n        handleChange,\r\n        handleBlur,\r\n        handleSubmit,\r\n        isSubmitting,\r\n    } = props;\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"auth__top\">\r\n                <h2>Register New Account</h2>\r\n                <p>Please fill in these fields</p>\r\n            </div>\r\n            <Block>\r\n                { success ?\r\n                <Form className=\"register-form\">\r\n                    <Form.Item\r\n                        validateStatus={\r\n                            validateField(touched, errors, 'email')\r\n                        }\r\n                        hasFeedback\r\n                        help={!touched.email ? '' : errors.email || ''}>\r\n                        <Input\r\n                            id='email'\r\n                            size='large'\r\n                            prefix={<Icon type='mail' style={{color: 'rgba(0, 0, 0, .25)'}}/>}\r\n                            placeholder='Email'\r\n                            value={values.email}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}/>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Input\r\n                            size='large'\r\n                            id='fullname'\r\n                            value={values.fullname}\r\n                            onChange={handleChange}\r\n                            prefix={<Icon type=\"user\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                            placeholder=\"Username\"/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        validateStatus={\r\n                            !touched.password ? '' : errors.password ? 'error' : 'success'\r\n                        }\r\n                        hasFeedback\r\n                        help={!touched.password ? '' : errors.password || ''}>\r\n                        <Input\r\n                            id='password'\r\n                            size='large'\r\n                            prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={values.password}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}/>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        validateStatus={\r\n                            !touched.repassword ? '' : errors.repassword ? 'error' : 'success'\r\n                            }\r\n                            hasFeedback\r\n                            help={!touched.repassword ? '' : errors.repassword ? errors.repassword : ''}>\r\n                        <Input\r\n                            id='repassword'\r\n                            size='large'\r\n                            prefix={<Icon type=\"lock\" style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                            type='password'\r\n                            placeholder='Repeat Password'\r\n                            value={values.repassword}\r\n                            onChange={handleChange}\r\n                            onBlur={handleBlur}/>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Button\r\n                                disabled={isSubmitting}\r\n                                onClick={handleSubmit}\r\n                                size=\"large\"\r\n                                type=\"primary\"\r\n                                htmlType=\"submit\"\r\n                                className=\"button login-form-button\">\r\n                            Create new account\r\n                        </Button>\r\n                    </Form.Item>\r\n                    <Form.Item>\r\n                        <Link to='login'\r\n                            className='auth__register-link'>\r\n                            Log in\r\n                        </Link>\r\n                    </Form.Item>\r\n                </Form>\r\n                    : <div className=\"auth__success-block\">\r\n                        <div>\r\n                            <Icon\r\n                                style={{fontSize: 50}}\r\n                                type='info-circle'\r\n                                theme='twoTone'/>\r\n                        </div>\r\n                        <h3>Confirm your profile</h3>\r\n                        <p>An email with confirmation link has benn sent to your email</p>\r\n                    </div> }\r\n            </Block>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default RegisterForm;","import RegisterForm from './containers/RegisterForm';\r\n\r\nexport default RegisterForm;","\r\nimport { withFormik } from \"formik\";\r\n\r\nimport RegisterForm from '../components/RegisterForm';\r\nimport validateForm from 'utils/validate';\r\nimport store from 'redux/store';\r\nimport { userActions } from 'redux/actions';\r\nimport { openNotification } from 'utils/helpers';\r\n\r\n\r\nexport default withFormik({\r\n    mapPropsToValues: () => ({\r\n        fullname: '',\r\n        email: '',\r\n        password: '',\r\n        repassword: '',\r\n    }),\r\n    validate: values => {\r\n        let errors = {};\r\n\r\n        validateForm({ isAuth : false, values: values, errors: errors });\r\n\r\n        return errors;\r\n    },\r\n    handleSubmit: (values, { setSubmitting, props }) => {\r\n        store.dispatch(\r\n            userActions\r\n            .fetchUserRegister(values)\r\n        )\r\n            .then(({ data }) => {\r\n                if (data.status === 'success') {\r\n                    props.history.push('/register/verify');\r\n                }\r\n                setSubmitting(false);\r\n            })\r\n            .catch(() => {\r\n                setSubmitting(false)\r\n                openNotification({\r\n                    text: 'Such user exists',\r\n                    type: 'error',\r\n                    title: 'Error',\r\n                })\r\n            })\r\n    },\r\n    displayName: 'RegisterForm',\r\n})(RegisterForm);","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nimport { LoginForm, RegisterForm } from \"modules\";\r\nimport { VerifyEmail } from 'components';\r\n\r\nimport './Auth.scss';\r\n\r\nconst Auth = () => (\r\n    <section className='auth'>\r\n        <div className=\"auth__content\">\r\n            <Route exact path={['/', '/login']} component={LoginForm}/>\r\n            <Route exact path='/register' component={RegisterForm}/>\r\n            <Route exact path='/register/verify' component={VerifyEmail}/>\r\n        </div>\r\n    </section>\r\n);\r\n\r\nexport default Auth;","import React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router\";\r\n\r\nimport { Status, Sidebar, Messages, ChatInput } from 'containers';\r\nimport { Avatar } from 'components';\r\n\r\nimport './Home.scss';\r\n\r\nconst Home = ({\r\n    user,\r\n    attachments,\r\n}) => {\r\n    const [myInfo, setMyInfo] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (user.data) {\r\n            setMyInfo(user.data);\r\n        }\r\n    }, [user.data]);\r\n\r\n    return (\r\n    <section className=\"home\">\r\n        <div className=\"chat\">\r\n            <Sidebar/>\r\n            <div className=\"chat__dialog\">\r\n                <div className=\"chat__dialog-header\">\r\n                    <Status/>\r\n                    {myInfo && !myInfo.token && <div className=\"chat__account\">\r\n                        <Avatar user={myInfo}/>\r\n                    </div>}\r\n                </div>\r\n                <div className=\"chat__dialog-messages\" style={{\r\n                    height: `calc(100% - ${attachments.items.length >= 1 ? 263: 138}px)`\r\n                }}>\r\n                    <Messages\r\n                        myId={myInfo._id || ''}/>\r\n                </div>\r\n                <ChatInput />\r\n            </div>\r\n        </div>\r\n    </section>)\r\n};\r\n\r\nexport default connect(\r\n    ({user, attachments}) => ({user, attachments})\r\n)(withRouter(Home));","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Redirect, Switch } from 'react-router-dom';\r\n\r\nimport { Auth, Home } from './pages';\r\n\r\nconst App = props => {\r\n  const { isAuthed } = props;\r\n\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path={['/login', '/register', '/register/verify']}\r\n          component={Auth}\r\n          />\r\n        <Route\r\n          path='/'\r\n          render={() => isAuthed ? <Home /> : <Redirect to='/login'/>}\r\n          />\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(({ user }) => ({ isAuthed: user.isAuthed }))(App);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport App from './App';\r\nimport store from './redux/store';\r\nimport { userActions } from './redux/actions';\r\n\r\nimport './styles/index.scss';\r\nimport 'emoji-mart/css/emoji-mart.css'\r\n\r\n\r\nstore.dispatch(userActions.fetchUserData());\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Router>\r\n            <App />\r\n        </Router>\r\n    </Provider>\r\n    , document.querySelector('#root'));","import { combineReducers } from 'redux';\r\n\r\nconst reducers = [\r\n    'messages',\r\n    'dialogs',\r\n    'user',\r\n    'attachments',\r\n];\r\n\r\nexport default combineReducers(\r\n    reducers.reduce((initial, name) => {\r\n        initial[name] = require(`./${name}`).default;\r\n        return initial;\r\n    }, {})\r\n);"],"sourceRoot":""}
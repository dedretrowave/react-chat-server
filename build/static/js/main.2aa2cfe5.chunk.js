(window.webpackJsonpchat=window.webpackJsonpchat||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var n=a(26);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={items:[]};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ATTACHMENTS:SET_ITEMS":return c({},e,{items:n});case"ATTACHMENTS:REMOVE_FILE":return c({},e,{items:e.items.filter((function(e){return e.uid!==n.uid}))});default:return e}}},169:function(e,t,a){"use strict";a.r(t);var n=a(26);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={items:[],currentDialogId:window.location.pathname.split("dialog/")[1],isLoading:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"DIALOGS:SET_ITEMS":return c({},e,{items:n});case"DIALOGS:SET_IS_LOADING":return c({},e,{isLoading:n});case"DIALOGS:SET_CURRENT_DIALOG_ID":return c({},e,{currentDialogId:n});default:return e}}},170:function(e,t,a){"use strict";a.r(t);var n=a(125),r=a(26);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var o={items:[],isLoading:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"MESSAGES:SET_ITEMS":return s({},e,{items:r,isLoading:!1});case"MESSAGES:ADD_MESSAGE":return s({},e,{items:[].concat(Object(n.a)(e.items),[r])});case"MESSAGES:CHANGE_MESSAGE":return s({},e,{items:e.items.filter((function(e){return e._id!==r._id||(e.text=r.text)}))});case"MESSAGES:REMOVE_MESSAGE":return s({},e,{items:e.items.filter((function(e){return e._id!==r}))});case"MESSAGES:SET_IS_LOADING":return s({},e,{isLoading:r});default:return e}}},171:function(e,t,a){"use strict";a.r(t);var n=a(26);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s="undefined"===window.sessionStorage.token?void 0:window.localStorage.token,o={data:null,token:s,isAuthed:!!s};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER:SET_DATA":return c({},e,{data:n,isAuthed:!0,token:window.sessionStorage.token});case"USER:SET_IS_AUTHED":return c({},e,{isAuthed:n});default:return e}}},242:function(e,t,a){e.exports=a.p+"static/media/wave.004b528d.svg"},243:function(e,t,a){e.exports=a.p+"static/media/waveBlack.8e9ed252.svg"},244:function(e,t,a){e.exports=a.p+"static/media/play.a1d839aa.svg"},245:function(e,t,a){e.exports=a.p+"static/media/pause.030b4c1a.svg"},248:function(e,t,a){e.exports=a.p+"static/media/checked.05bd65e9.svg"},249:function(e,t,a){e.exports=a.p+"static/media/unchecked.70aff14a.svg"},255:function(e,t){e.exports="data:image/png;base64,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"},266:function(e,t,a){e.exports=a(537)},277:function(e,t,a){var n={"./":87,"./attachments":168,"./attachments.js":168,"./dialogs":169,"./dialogs.js":169,"./index":87,"./index.js":87,"./messages":170,"./messages.js":170,"./user":171,"./user.js":171};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=277},279:function(e,t,a){},320:function(e,t,a){},347:function(e,t,a){},350:function(e,t,a){},352:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){},408:function(e,t){},533:function(e,t,a){},534:function(e,t,a){},535:function(e,t,a){},537:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),o=a(37),i=a(22),l=a(40),A=a(122),u=a(55),m=a(239),d=a(87),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,f=[m.a],p=Object(u.e)(d.default,g(u.a.apply(void 0,f))),E=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e,t){t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Please Enter Email"},password:function(e,a){a.password?t||/^(?=.*[a-z])(?=.*[0-9])(?=.{8,})/i.test(a.password)||(e.password=t?"Invalid Password":"Your password is too easy"):e.password="Please Input Password"},repassword:function(e,t){t.repassword?(e.password||t.repassword!==t.password)&&(e.repassword="Passwords doesn't match"):e.repassword="Please repeat password"},fullname:function(e,a){t||a.fullname||(e.fullname="Please input your full name")}};Object.keys(a).forEach((function(e){r[e]&&r[e](n,a)}))},v=a(543),h=a(544),b=a(7),w=a(56),O=a(2),y=a.n(O),S=(a(278),a(279),function(e){return r.a.createElement(w.a,Object.assign({},e,{className:y()(e.className,"button",{"button--large":"large"===e.size})}))}),j=(a(320),function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:y()("block",a)},t)}),B=a(12),I=function(e,t,a){if(e[a])return t[a]?"error":"success"},D=a(157),C=a.n(D),P=a(546),k=function(e){var t=e.text,a=e.type,n=void 0===a?"info":a,r=e.title,c=e.duration,s=void 0===c?3:c;return P.a[n]({message:r,description:t,duration:s})},N=a(242),M=a.n(N),T=a(243),L=a.n(T),Q=a(244),_=a.n(Q),F=a(245),x=a.n(F),G=function(e){var t=e.audio,a=e.isMe,c=Object(n.useState)(!1),s=Object(B.a)(c,2),o=s[0],i=s[1],l=Object(n.useState)(0),A=Object(B.a)(l,2),u=A[0],m=A[1],d=Object(n.useState)(0),g=Object(B.a)(d,2),f=g[0],p=g[1],E=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=E.current;e&&(e.addEventListener("playing",(function(){i(!0)}),!1),e.addEventListener("ended",(function(){i(!1),p(0)}),!1),e.addEventListener("pause",(function(){i(!1)}),!1),e.addEventListener("timeupdate",(function(){var t=e.duration||0;m(e.currentTime),p(e.currentTime/t*100)}),!1),e.addEventListener("loadeddata",(function(){m(e.duration)})))}),[]),r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:E,src:t,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:f+"%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){o?E.current.pause():E.current.play()}},o?r.a.createElement("img",{src:x.a,alt:"Pause Icon"}):r.a.createElement("img",{src:_.a,alt:"Play Icon"}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:a?L.a:M.a,alt:"Wave Icon"})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var t=Math.floor(e/60),a=(e%60).toFixed();return"".concat(t<10?"0":"").concat(t,":").concat(a<10?"0":"").concat(a)}(u))))},U=a(539),V=a(118),R=a.n(V),H=a(77),X=(a(347),function(e){var t=e.user,a=e.text,n=e.createdAt,c=e.isMe,s=e.unchecked,o=e.attachments,i=e.isAudio,l=e.isTyping,A=e.onRemoveMessage,u=e.setPreviewImage;return r.a.createElement("div",{className:y()("message",{"message--isme":c,"message--is-typing":l,"message--is-audio":i,"message--image":o&&1===o.length&&!a})},r.a.createElement("div",{className:"message__content"},r.a.createElement($,{isMe:c,unchecked:s}),c&&r.a.createElement(U.a,{content:r.a.createElement("div",{className:"message__actions"},r.a.createElement(w.a,{onClick:A,type:"danger"},"Delete")),trigger:"click"},r.a.createElement("div",{className:"message__icon-actions"},r.a.createElement(w.a,{type:"link",shape:"circle",icon:"ellipsis"}))),r.a.createElement("div",{className:"message__avatar"},r.a.createElement(Ae,{user:t})),r.a.createElement("div",{className:"message__info"},(!o.length||o.length>1&&a||1===o.length&&a||i)&&r.a.createElement("div",{className:"message__bubble"},a&&!i&&r.a.createElement("p",{className:"message__text"},R()(a,/:(.+?):/g,(function(e){return r.a.createElement(H.a,{emoji:e,set:"google",size:22,key:Math.random()})}))),l&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",{className:"dot one"}),r.a.createElement("span",{className:"dot two"}),r.a.createElement("span",{className:"dot three"})),i&&r.a.createElement(G,{audio:o[0].url,isMe:c})),o&&!!o.length&&!i&&r.a.createElement("div",{className:"message__attachments"},o.map((function(e){return r.a.createElement("div",{key:Math.random(),className:"message__attachments-item"},r.a.createElement(b.a,{type:"eye"}),r.a.createElement("img",{src:e.url,onClick:function(){return u(e.url)},alt:e.filename}))}))),r.a.createElement("span",{className:"message__date"},r.a.createElement(te,{date:n})))))}),q=a(548),z=a(542),Y=(a(350),function(e){var t,a=e._id,n=e.user,c=e.currentDialogId,s=e.isMe,i=e.onSelect,l=e.lastMessage;return r.a.createElement(o.b,{to:"/dialogs/".concat(n.fullname.split(" ").join("_"))},r.a.createElement("div",{className:y()("dialogs__item",{"dialogs__item--online":n.isOnline,"dialogs__item--selected":c===a}),onClick:i.bind(void 0,a)},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(Ae,{user:n})),r.a.createElement("div",{className:"dialogs__item-content"},r.a.createElement("div",{className:"dialogs__item-content-top"},r.a.createElement("b",null,n.fullname),r.a.createElement("span",{className:"dialogs__item-content-date"},(t=l.createdAt,t=new Date(t),Object(q.a)(t)?Object(z.a)(t,"HH:mm"):Object(z.a)(t,"MM.dd.yyyy")))),r.a.createElement("div",{className:"dialogs__item-content-bottom"},r.a.createElement("p",null,l.text?R()(l.text,/:(.+?):/g,(function(e){return r.a.createElement(H.a,{emoji:e,key:e+Math.round(10*Math.random()),set:"google",size:16})})):l.attachments.length&&"ogg"===l.attachments[0].ext?r.a.createElement("span",null,r.a.createElement(b.a,{type:"audio"})," Voice Message"):r.a.createElement("span",null,r.a.createElement(b.a,{type:"file-image"})," Image")),s&&r.a.createElement($,{isMe:s,unchecked:l.unchecked}),l.unchecked>0&&!s&&r.a.createElement("div",{className:"dialogs__item-content-bottom-unchecked-count"},l.unchecked>1?l.unchecked:1)))))}),Z=a(248),J=a.n(Z),W=a(249),K=a.n(W),$=function(e){var t=e.isMe,a=e.unchecked;return t?a?r.a.createElement("img",{src:K.a,alt:"UnCheckedIcon",className:"message__icon-unchecked"}):r.a.createElement("img",{src:J.a,alt:"CheckedIcon",className:"message__icon-checked"}):""},ee=a(261),te=function(e){var t=e.date;return t?r.a.createElement(n.Fragment,null,Object(ee.a)(new Date(t),{addSuffix:!0})):""},ae=a(78),ne=(a(189),a(352),function(e){var t=e.items,a=e.myId,n=e.onSearch,c=e.inputValue,s=e.currentDialogId,o=e.onSelectDialog;return r.a.createElement("div",{className:"dialogs-wrapper"},r.a.createElement("div",{className:"chat__sidebar-search"},r.a.createElement(h.a.Search,{placeholder:"Search for dialogs",onChange:function(e){return n(e.target.value)},value:c})),r.a.createElement("div",{className:"dialogs"},t.length?t.map((function(e){return r.a.createElement(Y,Object.assign({user:e.author._id!==a?e.author:e.partner,isMe:e.lastMessage.user._id===a,onSelect:o,key:e._id},e,{lastMessage:e.lastMessage,currentDialogId:s}))})):r.a.createElement(ae.a,{image:ae.a.PRESENTED_IMAGE_SIMPLE})))}),re=a(545),ce=(a(357),function(e){var t=e.onRemoveMessage,a=e.baseRef,n=e.isLoading,c=e.items,s=e.myId,o=e.user,i=e.previewImage,l=e.setPreviewImage,A=["ogg","webm","mp3"];return r.a.createElement("div",{ref:a,className:y()("messages",{"messages--loading":n})},n||!o?r.a.createElement(b.a,{type:"loading",spin:!0}):c&&c.length?r.a.createElement("div",{className:"messages-wrapper"},c.map((function(e){return r.a.createElement(X,Object.assign({isAudio:!!e.attachments.length&&A.includes(e.attachments[0].ext),onRemoveMessage:t.bind(void 0,e._id),setPreviewImage:l,key:Math.random()},e,{isMe:e.user._id===s}))}))):r.a.createElement(ae.a,{description:"Select dialog to start messaging or start new dialog by pressing button right to Dialogs List"}),r.a.createElement(re.a,{visible:!!i,onCancel:function(){return l(null)},footer:null},r.a.createElement("img",{src:i,style:{width:"100%"},alt:"Preview"})))}),se=a(26),oe=function(e){var t=e.userName,a=e.isVisible;return r.a.createElement(U.a,{className:"account-menu",title:t,trigger:"click",visible:a,placement:"bottom",content:r.a.createElement(w.a,{type:"danger",onClick:function(){window.sessionStorage.clear(),window.location.reload()}},"Log Out")})};a(358);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ae=function(e){var t=e.user,a=e.style,c=Object(n.useState)(!1),s=Object(B.a)(c,2),o=s[0],i=s[1],l=function(e,t){e&&!e.contains(t.target)&&i(!1)};if(Object(n.useEffect)((function(){var e=document.querySelector(".chat__account");document.addEventListener("click",l.bind(void 0,e))})),t.avatar)return r.a.createElement(n.Fragment,null,r.a.createElement("img",{className:"avatar",style:a,src:t.avatar,alt:"".concat(t.fullname," avatar"),onClick:function(){return i(!0)}}),r.a.createElement(oe,{userName:t.fullname,isVisible:o}));var A=function(e){var t=e.toString().substr(-3).split("").map((function(e){return e.charCodeAt(0)>255?255:e.charCodeAt(0)})),a=Object(B.a)(t,3),n=a[0],r=a[1],c=a[2],s=C()({r:n,g:r,b:c});return{color:s.lighten(10).saturate(10).toHexString(),colorLighten:s.lighten(30).saturate(30).toHexString()}}(t._id),u=t.fullname[0];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"avatar avatar--empty",style:le({},a,{background:"linear-gradient(135deg, ".concat(A.color,", ").concat(A.colorLighten," 96%)")}),onClick:function(){return i(!0)}},u),r.a.createElement(oe,{userName:t.fullname,isVisible:o}))},ue=a(253),me=(a(363),h.a.TextArea),de=function(e){var t=e.toggleEmojiTab,a=e.emojiTabIsActive,n=e.setValue,c=e.value,s=e.handleEmojiSelect,o=e.handleSendMessage,i=e.handleFileUpload,l=e.attachments,A=e.removeAttachment,u=e.isRecording,m=e.onRecord,d=e.onStopRecording;return r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",null,r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement("div",{className:y()("chat-input__emoji-picker",{"chat-input__emoji-picker--visible":a})},r.a.createElement(H.b,{set:"google",style:{width:290},onSelect:function(e){return s(e)}})),r.a.createElement(w.a,{onClick:t,type:"link",shape:"circle",className:"chat-input__smile-btn",icon:"smile"}),r.a.createElement(ue.UploadField,{onFiles:i,containerProps:{className:"chat-input__actions-upload-photo"},uploadProps:{accept:".jpg,.png,.jpeg,.pdf,.webp,.gif",multiple:"multiple"}},r.a.createElement(w.a,{type:"link",shape:"circle",icon:"camera"}))),!u&&r.a.createElement(me,{style:{height:20},autoSize:{maxRows:window.innerWidth<=480?2:6},onChange:function(e){return n(e.target.value)},onKeyUp:o,placeholder:"Input your message",value:c}),u&&r.a.createElement("div",{className:"chat-input__record-status"},r.a.createElement("i",{className:"record-icon"}),r.a.createElement("span",null,"Recording"),r.a.createElement(b.a,{type:"close",onClick:d})),u||c||l&&l.length?r.a.createElement(w.a,{type:"link",shape:"circle",icon:"check-circle",onClick:o}):r.a.createElement("div",{className:"chat-input__record-btn"},r.a.createElement(w.a,{type:"link",shape:"circle",icon:"audio",onClick:m}))),r.a.createElement("div",{className:"chat-input-attachments"},r.a.createElement(tt,{attachments:l,removeAttachment:A})))},ge=(a(364),function(e){var t=e.online,a=e.fullname,n=e.isMe;return r.a.createElement("div",{className:"chat__dialog-header-info"},r.a.createElement("b",{className:"chat__dialog-fullname"},a),!n&&r.a.createElement("span",{className:y()("status",{"status--online":t})},t?"online":"offline"))}),fe=a(547),pe=a(95),Ee=a.n(pe);Ee.a.defaults.baseURL=window.location.origin,Ee.a.defaults.headers.common.token=window.sessionStorage.token,window.axios=Ee.a;var ve=Ee.a,he=a(254),be=a.n(he)()(window.location.origin.replace("localhost:3000","slim-chat.herokuapp.com")),we={getAll:function(){return ve.get("/dialogs")},create:function(e){var t=e.partnerId,a=e.text;return ve.post("/dialogs",{partner:t,text:a})}},Oe={getDialogById:function(e){return ve.get("/messages/".concat(e))},send:function(e){var t=e.text,a=e.dialogId,n=e.attachments,r=void 0===n?[]:n;return ve.post("/messages",{text:t,dialog:a,attachments:r})},removeById:function(e){return ve.delete("/messages/".concat(e))}},ye={login:function(e){return ve.post("/user/login",e)},getMe:function(){return ve.get("/user/me")},verifyHash:function(e){return ve.get("/user/verify?hash=".concat(e))},register:function(e){return ve.post("/user/register",e)},findUsers:function(e){return ve.get("/user/find?query=".concat(e))}},Se={upload:function(e){var t=new FormData;return t.append("file",e),console.log(e),ve.post("/files",t,{headers:{"Content-Type":"multipart/form-data"}})}},je=function(e){var t=e.location,a=e.history,c=Object(n.useState)(!1),s=Object(B.a)(c,2),o=s[0],i=s[1],l=Object(n.useState)(""),A=Object(B.a)(l,2),u=A[0],m=A[1],d=Object(n.useState)("success"),g=Object(B.a)(d,2),f=g[0],p=g[1];return Object(n.useEffect)((function(){var e=t.search.split("hash=")[1];e&&ye.verifyHash(e).then((function(e){var t=e.data;p(t.status),"success"===t.status&&i(!0),m(t.message)})).catch((function(){i(!1),p("Error"),m("Confirmation error")}))})),r.a.createElement(j,{className:"verify-block"},r.a.createElement(fe.a,{status:f,title:f.toUpperCase(),subTitle:"success"!==f||o?u:"Please check your email to verify your account",extra:"success"===f&&o&&r.a.createElement(w.a,{onClick:function(){a.push("/login")},type:"primary"},"Login")}))},Be=a(540),Ie=a(166),De={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},setCurrentDialogId:function(e){return window.innerWidth<=480&&(document.querySelector(".chat").style.transform="translateX(-50%)"),{type:"DIALOGS:SET_CURRENT_DIALOG_ID",payload:e}},fetchDialogs:function(){return function(e){we.getAll().then((function(t){var a=t.data;e(De.setDialogs(a))}))}}},Ce=De,Pe={setMessages:function(e){return{type:"MESSAGES:SET_ITEMS",payload:e}},addMessage:function(e){return function(t,a){a().dialogs.currentDialogId===e.dialog._id&&t({type:"MESSAGES:ADD_MESSAGE",payload:e})}},setIsLoading:function(e){return{type:"MESSAGES:SET_IS_LOADING",payload:e}},removeMessageById:function(e){return function(t){console.log("Remove request for: ".concat(e)),Oe.removeById(e).then((function(){t({type:"MESSAGES:REMOVE_MESSAGE",payload:e})})).catch((function(){t(Pe.setIsLoading(!1))}))}},fetchMessageSend:function(e){var t=e.text,a=e.dialogId,n=e.attachments;return function(e){Oe.send({text:t,dialogId:a,attachments:n})}},fetchMessages:function(e){return function(t){t(Pe.setIsLoading(!0)),Oe.getDialogById(e).then((function(e){var a=e.data;t(Pe.setMessages(a))})).catch((function(){t(Pe.setIsLoading(!1))}))}}},ke=Pe,Ne={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},setIsAuthed:function(e){return{type:"USER:SET_IS_AUTHED",payload:e}},fetchUserData:function(){return function(e){ye.getMe().then((function(t){var a=t.data;e(Ne.setUserData(a))})).catch((function(){e(Ne.setIsAuthed(!1)),delete window.sessionStorage.token}))}},fetchUserRegister:function(e){return function(t){return ye.register(e)}},fetchUserLogin:function(e){return function(t){return ye.login(e).then((function(e){var a=e.data,n=a.token;return t(Ne.setUserData(a)),k({title:"success",type:"success"}),window.axios.defaults.headers.common.token=n,window.sessionStorage.token=n,t(Ne.fetchUserData()),t(Ne.setIsAuthed(!0)),a})).catch((function(){k({title:"Login Failed",text:"Error in email or password",type:"error"})}))}}},Me=Ne,Te={setAttachments:function(e){return{type:"ATTACHMENTS:SET_ITEMS",payload:e}},removeAttachment:function(e){return{type:"ATTACHMENTS:REMOVE_FILE",payload:e}}},Le=Object(i.b)((function(e){return e.dialogs}),Ce)((function(e){var t=e.fetchDialogs,a=e.currentDialogId,c=e.setCurrentDialogId,s=e.items,o=e.myId,i=Object(n.useState)(""),l=Object(Ie.a)(i,2),A=l[0],u=l[1],m=Object(n.useState)(Array.from(s)),d=Object(Ie.a)(m,2),g=d[0],f=d[1];Object(n.useEffect)((function(){s.length?f(s):t()}),[s,t]),be.on("SERVER:DIALOG_CREATED",(function(){t()})),be.on("MESSAGES:NEW_MESSAGE",(function(){t()}));var p=g.sort((function(e,t){return new Date(t.lastMessage.createdAt)-new Date(e.lastMessage.createdAt)}));return r.a.createElement(ne,{myId:o,items:p,onSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";f(s.filter((function(t){return(t.author._id===o?t.partner:t.author).fullname.toLowerCase().indexOf(e.toLowerCase())>=0}))),u(e)},inputValue:A,onSelectDialog:c,currentDialogId:a})})),Qe=Object(i.b)((function(e){var t=e.dialogs,a=e.user,n=e.messages;return{currentDialogId:t.currentDialogId,items:n.items,isLoading:n.isLoading,user:a.data}}),ke)((function(e){var t=e.items,a=e.fetchMessages,c=e.currentDialogId,s=e.removeMessageById,o=(e.fetchMessageChange,e.addMessage),i=e.isLoading,l=e.myId,A=e.user,u=Object(n.useRef)(null),m=Object(n.useState)(null),d=Object(B.a)(m,2),g=d[0],f=d[1],p=function(e){o(e)};return Object(n.useEffect)((function(){return c&&a(c),be.on("MESSAGES:NEW_MESSAGE",p),function(){be.removeListener("MESSAGES:NEW_MESSAGE",p)}}),[c]),Object(n.useEffect)((function(){u.current.scrollTop=u.current.scrollHeight}),[t]),r.a.createElement(ce,{user:A,onRemoveMessage:s,myId:l,baseRef:u,isLoading:i,items:t,setPreviewImage:f,previewImage:g})})),_e=a(57),Fe=a.n(_e),xe=a(125),Ge=a(121);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Ve=Object(i.b)((function(e){return{dialogs:e.dialogs,attachments:e.attachments.items}}),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},ke,{},Te))((function(e){var t=e.fetchMessageSend,a=e.setAttachments,c=e.removeAttachment,s=e.dialogs.currentDialogId,o=e.attachments;window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia||window.navigator.webkitGetUserMedia;var i=Object(n.useState)(""),l=Object(B.a)(i,2),A=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(B.a)(m,2),g=d[0],f=d[1],p=Object(n.useState)(!1),E=Object(B.a)(p,2),v=E[0],h=E[1],b=Object(n.useState)(null),w=Object(B.a)(b,2),O=w[0],y=w[1],S=function(e,t){e&&!(e.contains(t.target)||t.target.closest(".chat-input__emoji-picker")||t.target.classList.contains("chat-input__smile-btn"))&&f(!1)},j=function(e){var a=new MediaRecorder(e);y(a),a.start(),a.onstart=function(){h(!0)},a.onstop=function(){h(!1)},a.ondataavailable=function(e){var a=new File([e.data],"audio.ogg",{type:"audio/ogg"});Se.upload(a).then((function(e){var a,n=e.data;a=n.file._id,t({text:A,dialogId:s,attachments:[a]})}))}},I=function(e){console.log("Error: "+e)},D=function(){var e=Object(Ge.a)(Fe.a.mark((function e(t){var n,r,c,s,i,l,A;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o,r=!0,c=!1,s=void 0,e.prev=4,i=Fe.a.mark((function e(){var t,r;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A.value,r=Math.round(1e3*Math.random()),n=[].concat(Object(xe.a)(n),[{uid:r,name:t.name,status:"uploading"}]),a(n),e.next=6,Se.upload(t).then((function(e){var t=e.data;n=n.map((function(e){return e.uid===r?{status:"done",uid:t.file._id,name:t.file.filename,url:t.file.url}:e}))})).catch((function(){return{status:"error"}}));case 6:case"end":return e.stop()}}),e)})),l=t[Symbol.iterator]();case 7:if(r=(A=l.next()).done){e.next=12;break}return e.delegateYield(i(),"t0",9);case 9:r=!0,e.next=7;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),c=!0,s=e.t1;case 18:e.prev=18,e.prev=19,r||null==l.return||l.return();case 21:if(e.prev=21,!c){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:a(n);case 27:case"end":return e.stop()}}),e,null,[[4,14,18,26],[19,,21,25]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=document.querySelector(".chat-input__smile-btn");return document.addEventListener("click",S.bind(void 0,e)),function(){document.addEventListener("click",S.bind(void 0,e))}})),s?r.a.createElement(de,{toggleEmojiTab:function(){f(!g)},emojiTabIsActive:g,setValue:u,value:A,handleEmojiSelect:function(e){var t=e.colons;u((A+" "+t).trim())},handleSendMessage:function(e){13!==e.keyCode&&"click"!==e.type||(e.preventDefault(),O&&O.stop(),o&&o.length?(t({text:A,dialogId:s,attachments:o.map((function(e){return e.uid}))}),a([])):A&&t({text:A,dialogId:s}),u(""),h(!1))},handleFileUpload:D,attachments:o,removeAttachment:c,isRecording:v,onRecord:function(){navigator.getUserMedia&&navigator.getUserMedia({audio:!0},j,I)},onStopRecording:function(){O.stop(),h(!1)}}):null})),Re=Object(i.b)((function(e){var t=e.dialogs,a=e.user;return{currentDialogId:t.currentDialogId,dialogs:t.items,user:a.data}}))((function(e){var t=e.currentDialogId,a=e.user,n=e.dialogs,c=n.filter((function(e){return e._id===t}))[0];if(!n.length||!t)return a&&r.a.createElement(ge,{fullname:a.fullname,isMe:!0});var s={};return s=c.author._id===a._id?c.partner:c.author,r.a.createElement(ge,{fullname:s.fullname,online:s.isOnline})})),He=Object(i.b)((function(e){return{user:e.user.data}}),Ce)((function(e){var t=e.user,a=e.getAll,c=Object(n.useState)(!1),s=Object(B.a)(c,2),o=s[0],i=s[1],l=Object(n.useState)(""),A=Object(B.a)(l,2),u=A[0],m=A[1],d=Object(n.useState)([]),g=Object(B.a)(d,2),f=g[0],p=g[1],E=Object(n.useState)(!1),v=Object(B.a)(E,2),h=v[0],b=v[1],w=Object(n.useState)(""),O=Object(B.a)(w,2),y=O[0],S=O[1],j=Object(n.useState)(""),I=Object(B.a)(j,2),D=I[0],C=I[1],P=function(){i(!1)};return r.a.createElement(Je,{user:t,onShow:function(){i(!0)},onClose:P,isVisible:o,isSearching:h,inputValue:u,onModalOk:function(){we.create({partnerId:y,text:D}).then((function(){P(),b(!1),be.on("DIALOGS:DIALOG_CREATED",a)})).catch((function(){b(!1)}))},onChangeInput:function(e){m(e)},onSearch:function(e){b(!0),ye.findUsers(e).then((function(e){var t=e.data;console.log(t),b(!1),p(t)})).catch((function(){b(!0)}))},onSelectUser:function(e){S(e)},onTextAreaChange:function(e){C(e.target.value)},users:f,messageText:D})})),Xe=a(255),qe=a.n(Xe),ze=Be.a.Option,Ye=h.a.TextArea,Ze=function(e){var t=e.users,a=e.user,n=e.isVisible,c=e.onShow,s=e.onClose,o=e.onChangeInput,i=e.onSelectUser,l=e.inputValue,A=e.isSearching,u=e.onSearch,m=e.onModalOk,d=e.onTextAreaChange,g=e.messageText,f=t.map((function(e){return r.a.createElement(ze,{key:e._id,style:{display:"flex",alignItems:"center"}},e.fullname,r.a.createElement("span",{style:{color:"lightgray",marginLeft:5}},e.email))}));return r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement("img",{className:"chat__sidebar-logo",src:qe.a,alt:"Logo"}),r.a.createElement("span",{className:"chat__sidebar-name"},"Slim-Chat ",r.a.createElement("span",{className:"chat__sidebar-version"},"v0.2.0"))),r.a.createElement(w.a,{onClick:c,type:"link",shape:"circle",icon:"form",style:{color:"rgba(0, 0, 0, .6)"}}),r.a.createElement(re.a,{visible:n,title:"Start new dialog",onClose:s,footer:[r.a.createElement(w.a,{key:"back",onClick:s},"Cancel"),r.a.createElement(w.a,{disabled:!g,key:"submit",type:"primary",loading:A,onClick:m},"Write!")]},r.a.createElement(v.a,null,r.a.createElement(v.a.Item,{label:"Input User's name or email"},r.a.createElement(Be.a,{value:l,onChange:o,onSearch:u,onSelect:i,style:{width:"100%"},placeholder:"Find user by name or email",notFoundContent:"Nobody found :(",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,showSearch:!0},f)),r.a.createElement(v.a.Item,{label:"Input your message"},r.a.createElement(Ye,{style:{marginTop:10},onChange:d,value:g,placeholder:"Input your message here",autoSize:{minRows:1,maxRows:6}}))))),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(Le,{myId:a&&a._id})))};Ze.defaultProps={users:[]};var Je=Ze,We=a(541);function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ke(a,!0).forEach((function(t){Object(se.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function et(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var tt=function(e){var t=e.attachments,a=e.removeAttachment,c=Object(n.useState)({previewVisible:!1,previewImage:"",fileList:t}),s=Object(B.a)(c,2),o=s[0],i=s[1];Object(n.useEffect)((function(){i($e({},o,{fileList:t}))}),[t]);var l=function(){var e=Object(Ge.a)(Fe.a.mark((function e(t){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t.url||t.preview){e.next=5;break}return e.next=4,et(t.originalFileObj);case 4:t.preview=e.sent;case 5:i($e({},o,{previewImage:t.url||t.preview,previewVisible:!0}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"clearfix"},r.a.createElement(We.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:o.fileList,onPreview:l,onChange:function(e){var t=e.fileList;return i({fileList:t})},onRemove:function(e){return a(e)}}),r.a.createElement(re.a,{visible:o.previewVisible,footer:null,onCancel:function(){return i($e({},o,{previewVisible:!1}))}},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:o.previewImage})))},at=function(){return r.a.createElement(w.a,{type:"link",shape:"circle",icon:"left",onClick:function(){document.querySelector(".chat").style.transform="translateX(0)"},style:{color:"#999",fontSize:22}})},nt=function(e){var t=e.values,a=e.touched,n=e.errors,c=e.handleChange,s=e.handleBlur,i=e.handleSubmit,l=e.isValid,A=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"Enter account"),r.a.createElement("p",null,"Please enter your account")),r.a.createElement(j,null,r.a.createElement(v.a,{className:"login-form"},r.a.createElement(v.a.Item,{validateStatus:I(a,n,"email"),help:a.email&&n.email||""},r.a.createElement(h.a,{id:"email",size:"large",prefix:r.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",values:t.email,onChange:c,onBlur:s})),r.a.createElement(v.a.Item,{validateStatus:I(a,n,"password"),help:a.password&&n.password||""},r.a.createElement(h.a,{id:"password",size:"large",prefix:r.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",value:t.password,onChange:c,onBlur:s})),r.a.createElement(v.a.Item,null,A&&!l&&r.a.createElement("span",null,"Error!"),r.a.createElement(S,{disabled:A,onClick:i,size:"large",type:"primary",htmlType:"submit",className:"login-form-button button"},"Log in")),r.a.createElement(v.a.Item,null,r.a.createElement(o.b,{to:"register",className:"auth__register-link"},"Register")))))},rt=Object(A.a)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return E({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.props;p.dispatch(Me.fetchUserLogin(e)).then((function(e){"success"===e.status&&n.history.push("/"),a(!1)})).catch((function(){return a(!1)}))},displayName:"LoginForm"})(nt),ct=function(e){var t=e.values,a=e.touched,n=e.errors,c=e.handleChange,s=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"Register New Account"),r.a.createElement("p",null,"Please fill in these fields")),r.a.createElement(j,null,r.a.createElement(v.a,{className:"register-form"},r.a.createElement(v.a.Item,{validateStatus:I(a,n,"email"),hasFeedback:!0,help:a.email&&n.email||""},r.a.createElement(h.a,{id:"email",size:"large",prefix:r.a.createElement(b.a,{type:"mail",style:{color:"rgba(0, 0, 0, .25)"}}),placeholder:"Email",value:t.email,onChange:c,onBlur:s})),r.a.createElement(v.a.Item,null,r.a.createElement(h.a,{size:"large",id:"fullname",value:t.fullname,onChange:c,prefix:r.a.createElement(b.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"})),r.a.createElement(v.a.Item,{validateStatus:a.password?n.password?"error":"success":"",hasFeedback:!0,help:a.password&&n.password||""},r.a.createElement(h.a,{id:"password",size:"large",prefix:r.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",value:t.password,onChange:c,onBlur:s})),r.a.createElement(v.a.Item,{validateStatus:a.repassword?n.repassword?"error":"success":"",hasFeedback:!0,help:a.repassword&&n.repassword?n.repassword:""},r.a.createElement(h.a,{id:"repassword",size:"large",prefix:r.a.createElement(b.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Repeat Password",value:t.repassword,onChange:c,onBlur:s})),r.a.createElement(v.a.Item,null,r.a.createElement(S,{disabled:l,onClick:i,size:"large",type:"primary",htmlType:"submit",className:"button login-form-button"},"Create new account")),r.a.createElement(v.a.Item,null,r.a.createElement(o.b,{to:"login",className:"auth__register-link"},"Log in")))))},st=Object(A.a)({mapPropsToValues:function(){return{fullname:"",email:"",password:"",repassword:""}},validate:function(e){var t={};return E({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.props;p.dispatch(Me.fetchUserRegister(e)).then((function(e){"success"===e.data.status&&n.history.push("/register/verify"),a(!1)})).catch((function(){a(!1),k({text:"Such user exists",type:"error",title:"Error"})}))},displayName:"RegisterForm"})(ct),ot=(a(533),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(l.b,{exact:!0,path:["/","/login"],component:rt}),r.a.createElement(l.b,{exact:!0,path:"/register",component:st}),r.a.createElement(l.b,{exact:!0,path:"/register/verify",component:je})))}),it=(a(534),Object(i.b)((function(e){return{user:e.user,attachments:e.attachments}}))(Object(l.g)((function(e){var t=e.user,a=e.attachments,c=Object(n.useState)(""),s=Object(B.a)(c,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){t.data&&i(t.data)}),[t.data]),r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement(He,null),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement(at,null),r.a.createElement(Re,null),o&&!o.token&&r.a.createElement("div",{className:"chat__account"},r.a.createElement(Ae,{user:o}))),r.a.createElement("div",{className:"chat__dialog-messages",style:{height:"calc(100% - ".concat(a.items.length>=1?263:138,"px)")}},r.a.createElement(Qe,{myId:o._id||""})),r.a.createElement(Ve,null))))})))),lt=Object(i.b)((function(e){return{isAuthed:e.user.isAuthed}}))((function(e){var t=e.isAuthed;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:["/login","/register","/register/verify"],component:ot}),r.a.createElement(l.b,{path:"/",render:function(){return t?r.a.createElement(it,null):r.a.createElement(l.a,{to:"/login"})}})))}));a(535),a(536);p.dispatch(Me.fetchUserData()),s.a.render(r.a.createElement(i.a,{store:p},r.a.createElement(o.a,null,r.a.createElement(lt,null))),document.querySelector("#root"))},87:function(e,t,a){"use strict";a.r(t);var n=a(55);t.default=Object(n.c)(["messages","dialogs","user","attachments"].reduce((function(e,t){return e[t]=a(277)("./".concat(t)).default,e}),{}))}},[[266,1,2]]]);
//# sourceMappingURL=main.2aa2cfe5.chunk.js.map